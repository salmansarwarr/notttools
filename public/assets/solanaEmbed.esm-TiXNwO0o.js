import{f as Qs,a1 as Ct,a2 as ea,P as Si}from"./solana-Jk3nGovC.js";import{r as Lr,e as ta}from"./index-C4Shr6jL.js";import{r as Pt}from"./polyfills-CHwIkQcA.js";import{g as Ut}from"./vendor-D5d5vywP.js";import"./ui-DsjnilZE.js";var ra=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,on=Math.ceil,ze=Math.floor,qe="[BigNumber Error] ",Ai=qe+"Number primitive has more than 15 significant digits: ",Xe=1e14,pe=14,sn=9007199254740991,an=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],gt=1e7,Ne=1e9;function $o(r){var e,t,n,i=c.prototype={constructor:c,toString:null,valueOf:null},s=new c(1),o=20,l=4,g=-7,w=21,P=-1e7,O=1e7,R=!1,q=1,k=0,I={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},m="0123456789abcdefghijklmnopqrstuvwxyz",u=!0;function c(a,y){var f,h,b,d,N,p,S,C,_=this;if(!(_ instanceof c))return new c(a,y);if(y==null){if(a&&a._isBigNumber===!0){_.s=a.s,!a.c||a.e>O?_.c=_.e=null:a.e<P?_.c=[_.e=0]:(_.e=a.e,_.c=a.c.slice());return}if((p=typeof a=="number")&&a*0==0){if(_.s=1/a<0?(a=-a,-1):1,a===~~a){for(d=0,N=a;N>=10;N/=10,d++);d>O?_.c=_.e=null:(_.e=d,_.c=[a]);return}C=String(a)}else{if(!ra.test(C=String(a)))return n(_,C,p);_.s=C.charCodeAt(0)==45?(C=C.slice(1),-1):1}(d=C.indexOf("."))>-1&&(C=C.replace(".","")),(N=C.search(/e/i))>0?(d<0&&(d=N),d+=+C.slice(N+1),C=C.substring(0,N)):d<0&&(d=C.length)}else{if(Re(y,2,m.length,"Base"),y==10&&u)return _=new c(a),J(_,o+_.e+1,l);if(C=String(a),p=typeof a=="number"){if(a*0!=0)return n(_,C,p,y);if(_.s=1/a<0?(C=C.slice(1),-1):1,c.DEBUG&&C.replace(/^0\.0*|\./,"").length>15)throw Error(Ai+a)}else _.s=C.charCodeAt(0)===45?(C=C.slice(1),-1):1;for(f=m.slice(0,y),d=N=0,S=C.length;N<S;N++)if(f.indexOf(h=C.charAt(N))<0){if(h=="."){if(N>d){d=S;continue}}else if(!b&&(C==C.toUpperCase()&&(C=C.toLowerCase())||C==C.toLowerCase()&&(C=C.toUpperCase()))){b=!0,N=-1,d=0;continue}return n(_,String(a),p,y)}p=!1,C=t(C,y,10,_.s),(d=C.indexOf("."))>-1?C=C.replace(".",""):d=C.length}for(N=0;C.charCodeAt(N)===48;N++);for(S=C.length;C.charCodeAt(--S)===48;);if(C=C.slice(N,++S)){if(S-=N,p&&c.DEBUG&&S>15&&(a>sn||a!==ze(a)))throw Error(Ai+_.s*a);if((d=d-N-1)>O)_.c=_.e=null;else if(d<P)_.c=[_.e=0];else{if(_.e=d,_.c=[],N=(d+1)%pe,d<0&&(N+=pe),N<S){for(N&&_.c.push(+C.slice(0,N)),S-=pe;N<S;)_.c.push(+C.slice(N,N+=pe));N=pe-(C=C.slice(N)).length}else N-=S;for(;N--;C+="0");_.c.push(+C)}}else _.c=[_.e=0]}c.clone=$o,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(a){var y,f;if(a!=null)if(typeof a=="object"){if(a.hasOwnProperty(y="DECIMAL_PLACES")&&(f=a[y],Re(f,0,Ne,y),o=f),a.hasOwnProperty(y="ROUNDING_MODE")&&(f=a[y],Re(f,0,8,y),l=f),a.hasOwnProperty(y="EXPONENTIAL_AT")&&(f=a[y],f&&f.pop?(Re(f[0],-Ne,0,y),Re(f[1],0,Ne,y),g=f[0],w=f[1]):(Re(f,-Ne,Ne,y),g=-(w=f<0?-f:f))),a.hasOwnProperty(y="RANGE"))if(f=a[y],f&&f.pop)Re(f[0],-Ne,-1,y),Re(f[1],1,Ne,y),P=f[0],O=f[1];else if(Re(f,-Ne,Ne,y),f)P=-(O=f<0?-f:f);else throw Error(qe+y+" cannot be zero: "+f);if(a.hasOwnProperty(y="CRYPTO"))if(f=a[y],f===!!f)if(f)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))R=f;else throw R=!f,Error(qe+"crypto unavailable");else R=f;else throw Error(qe+y+" not true or false: "+f);if(a.hasOwnProperty(y="MODULO_MODE")&&(f=a[y],Re(f,0,9,y),q=f),a.hasOwnProperty(y="POW_PRECISION")&&(f=a[y],Re(f,0,Ne,y),k=f),a.hasOwnProperty(y="FORMAT"))if(f=a[y],typeof f=="object")I=f;else throw Error(qe+y+" not an object: "+f);if(a.hasOwnProperty(y="ALPHABET"))if(f=a[y],typeof f=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(f))u=f.slice(0,10)=="0123456789",m=f;else throw Error(qe+y+" invalid: "+f)}else throw Error(qe+"Object expected: "+a);return{DECIMAL_PLACES:o,ROUNDING_MODE:l,EXPONENTIAL_AT:[g,w],RANGE:[P,O],CRYPTO:R,MODULO_MODE:q,POW_PRECISION:k,FORMAT:I,ALPHABET:m}},c.isBigNumber=function(a){if(!a||a._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var y,f,h=a.c,b=a.e,d=a.s;e:if({}.toString.call(h)=="[object Array]"){if((d===1||d===-1)&&b>=-Ne&&b<=Ne&&b===ze(b)){if(h[0]===0){if(b===0&&h.length===1)return!0;break e}if(y=(b+1)%pe,y<1&&(y+=pe),String(h[0]).length==y){for(y=0;y<h.length;y++)if(f=h[y],f<0||f>=Xe||f!==ze(f))break e;if(f!==0)return!0}}}else if(h===null&&b===null&&(d===null||d===1||d===-1))return!0;throw Error(qe+"Invalid BigNumber: "+a)},c.maximum=c.max=function(){return G(arguments,-1)},c.minimum=c.min=function(){return G(arguments,1)},c.random=function(){var a=9007199254740992,y=Math.random()*a&2097151?function(){return ze(Math.random()*a)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(f){var h,b,d,N,p,S=0,C=[],_=new c(s);if(f==null?f=o:Re(f,0,Ne),N=on(f/pe),R)if(crypto.getRandomValues){for(h=crypto.getRandomValues(new Uint32Array(N*=2));S<N;)p=h[S]*131072+(h[S+1]>>>11),p>=9e15?(b=crypto.getRandomValues(new Uint32Array(2)),h[S]=b[0],h[S+1]=b[1]):(C.push(p%1e14),S+=2);S=N/2}else if(crypto.randomBytes){for(h=crypto.randomBytes(N*=7);S<N;)p=(h[S]&31)*281474976710656+h[S+1]*1099511627776+h[S+2]*4294967296+h[S+3]*16777216+(h[S+4]<<16)+(h[S+5]<<8)+h[S+6],p>=9e15?crypto.randomBytes(7).copy(h,S):(C.push(p%1e14),S+=7);S=N/7}else throw R=!1,Error(qe+"crypto unavailable");if(!R)for(;S<N;)p=y(),p<9e15&&(C[S++]=p%1e14);for(N=C[--S],f%=pe,N&&f&&(p=an[pe-f],C[S]=ze(N/p)*p);C[S]===0;C.pop(),S--);if(S<0)C=[d=0];else{for(d=-1;C[0]===0;C.splice(0,1),d-=pe);for(S=1,p=C[0];p>=10;p/=10,S++);S<pe&&(d-=pe-S)}return _.e=d,_.c=C,_}}(),c.sum=function(){for(var a=1,y=arguments,f=new c(y[0]);a<y.length;)f=f.plus(y[a++]);return f},t=function(){var a="0123456789";function y(f,h,b,d){for(var N,p=[0],S,C=0,_=f.length;C<_;){for(S=p.length;S--;p[S]*=h);for(p[0]+=d.indexOf(f.charAt(C++)),N=0;N<p.length;N++)p[N]>b-1&&(p[N+1]==null&&(p[N+1]=0),p[N+1]+=p[N]/b|0,p[N]%=b)}return p.reverse()}return function(f,h,b,d,N){var p,S,C,_,B,E,j,K,W=f.indexOf("."),ee=o,Q=l;for(W>=0&&(_=k,k=0,f=f.replace(".",""),K=new c(h),E=K.pow(f.length-W),k=_,K.c=y(st($e(E.c),E.e,"0"),10,b,a),K.e=K.c.length),j=y(f,h,b,N?(p=m,a):(p=a,m)),C=_=j.length;j[--_]==0;j.pop());if(!j[0])return p.charAt(0);if(W<0?--C:(E.c=j,E.e=C,E.s=d,E=e(E,K,ee,Q,b),j=E.c,B=E.r,C=E.e),S=C+ee+1,W=j[S],_=b/2,B=B||S<0||j[S+1]!=null,B=Q<4?(W!=null||B)&&(Q==0||Q==(E.s<0?3:2)):W>_||W==_&&(Q==4||B||Q==6&&j[S-1]&1||Q==(E.s<0?8:7)),S<1||!j[0])f=B?st(p.charAt(1),-ee,p.charAt(0)):p.charAt(0);else{if(j.length=S,B)for(--b;++j[--S]>b;)j[S]=0,S||(++C,j=[1].concat(j));for(_=j.length;!j[--_];);for(W=0,f="";W<=_;f+=p.charAt(j[W++]));f=st(f,C,p.charAt(0))}return f}}(),e=function(){function a(h,b,d){var N,p,S,C,_=0,B=h.length,E=b%gt,j=b/gt|0;for(h=h.slice();B--;)S=h[B]%gt,C=h[B]/gt|0,N=j*S+C*E,p=E*S+N%gt*gt+_,_=(p/d|0)+(N/gt|0)+j*C,h[B]=p%d;return _&&(h=[_].concat(h)),h}function y(h,b,d,N){var p,S;if(d!=N)S=d>N?1:-1;else for(p=S=0;p<d;p++)if(h[p]!=b[p]){S=h[p]>b[p]?1:-1;break}return S}function f(h,b,d,N){for(var p=0;d--;)h[d]-=p,p=h[d]<b[d]?1:0,h[d]=p*N+h[d]-b[d];for(;!h[0]&&h.length>1;h.splice(0,1));}return function(h,b,d,N,p){var S,C,_,B,E,j,K,W,ee,Q,le,ue,z,V,oe,ce,fe,L=h.s==b.s?1:-1,M=h.c,F=b.c;if(!M||!M[0]||!F||!F[0])return new c(!h.s||!b.s||(M?F&&M[0]==F[0]:!F)?NaN:M&&M[0]==0||!F?L*0:L/0);for(W=new c(L),ee=W.c=[],C=h.e-b.e,L=d+C+1,p||(p=Xe,C=Ge(h.e/pe)-Ge(b.e/pe),L=L/pe|0),_=0;F[_]==(M[_]||0);_++);if(F[_]>(M[_]||0)&&C--,L<0)ee.push(1),B=!0;else{for(V=M.length,ce=F.length,_=0,L+=2,E=ze(p/(F[0]+1)),E>1&&(F=a(F,E,p),M=a(M,E,p),ce=F.length,V=M.length),z=ce,Q=M.slice(0,ce),le=Q.length;le<ce;Q[le++]=0);fe=F.slice(),fe=[0].concat(fe),oe=F[0],F[1]>=p/2&&oe++;do{if(E=0,S=y(F,Q,ce,le),S<0){if(ue=Q[0],ce!=le&&(ue=ue*p+(Q[1]||0)),E=ze(ue/oe),E>1)for(E>=p&&(E=p-1),j=a(F,E,p),K=j.length,le=Q.length;y(j,Q,K,le)==1;)E--,f(j,ce<K?fe:F,K,p),K=j.length,S=1;else E==0&&(S=E=1),j=F.slice(),K=j.length;if(K<le&&(j=[0].concat(j)),f(Q,j,le,p),le=Q.length,S==-1)for(;y(F,Q,ce,le)<1;)E++,f(Q,ce<le?fe:F,le,p),le=Q.length}else S===0&&(E++,Q=[0]);ee[_++]=E,Q[0]?Q[le++]=M[z]||0:(Q=[M[z]],le=1)}while((z++<V||Q[0]!=null)&&L--);B=Q[0]!=null,ee[0]||ee.splice(0,1)}if(p==Xe){for(_=1,L=ee[0];L>=10;L/=10,_++);J(W,d+(W.e=_+C*pe-1)+1,N,B)}else W.e=C,W.r=+B;return W}}();function v(a,y,f,h){var b,d,N,p,S;if(f==null?f=l:Re(f,0,8),!a.c)return a.toString();if(b=a.c[0],N=a.e,y==null)S=$e(a.c),S=h==1||h==2&&(N<=g||N>=w)?mr(S,N):st(S,N,"0");else if(a=J(new c(a),y,f),d=a.e,S=$e(a.c),p=S.length,h==1||h==2&&(y<=d||d<=g)){for(;p<y;S+="0",p++);S=mr(S,d)}else if(y-=N+(h===2&&d>N),S=st(S,d,"0"),d+1>p){if(--y>0)for(S+=".";y--;S+="0");}else if(y+=d-p,y>0)for(d+1==p&&(S+=".");y--;S+="0");return a.s<0&&b?"-"+S:S}function G(a,y){for(var f,h,b=1,d=new c(a[0]);b<a.length;b++)h=new c(a[b]),(!h.s||(f=St(d,h))===y||f===0&&d.s===y)&&(d=h);return d}function $(a,y,f){for(var h=1,b=y.length;!y[--b];y.pop());for(b=y[0];b>=10;b/=10,h++);return(f=h+f*pe-1)>O?a.c=a.e=null:f<P?a.c=[a.e=0]:(a.e=f,a.c=y),a}n=function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,f=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,b=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,N,p,S){var C,_=p?N:N.replace(b,"");if(h.test(_))d.s=isNaN(_)?null:_<0?-1:1;else{if(!p&&(_=_.replace(a,function(B,E,j){return C=(j=j.toLowerCase())=="x"?16:j=="b"?2:8,!S||S==C?E:B}),S&&(C=S,_=_.replace(y,"$1").replace(f,"0.$1")),N!=_))return new c(_,C);if(c.DEBUG)throw Error(qe+"Not a"+(S?" base "+S:"")+" number: "+N);d.s=null}d.c=d.e=null}}();function J(a,y,f,h){var b,d,N,p,S,C,_,B=a.c,E=an;if(B){e:{for(b=1,p=B[0];p>=10;p/=10,b++);if(d=y-b,d<0)d+=pe,N=y,S=B[C=0],_=ze(S/E[b-N-1]%10);else if(C=on((d+1)/pe),C>=B.length)if(h){for(;B.length<=C;B.push(0));S=_=0,b=1,d%=pe,N=d-pe+1}else break e;else{for(S=p=B[C],b=1;p>=10;p/=10,b++);d%=pe,N=d-pe+b,_=N<0?0:ze(S/E[b-N-1]%10)}if(h=h||y<0||B[C+1]!=null||(N<0?S:S%E[b-N-1]),h=f<4?(_||h)&&(f==0||f==(a.s<0?3:2)):_>5||_==5&&(f==4||h||f==6&&(d>0?N>0?S/E[b-N]:0:B[C-1])%10&1||f==(a.s<0?8:7)),y<1||!B[0])return B.length=0,h?(y-=a.e+1,B[0]=E[(pe-y%pe)%pe],a.e=-y||0):B[0]=a.e=0,a;if(d==0?(B.length=C,p=1,C--):(B.length=C+1,p=E[pe-d],B[C]=N>0?ze(S/E[b-N]%E[N])*p:0),h)for(;;)if(C==0){for(d=1,N=B[0];N>=10;N/=10,d++);for(N=B[0]+=p,p=1;N>=10;N/=10,p++);d!=p&&(a.e++,B[0]==Xe&&(B[0]=1));break}else{if(B[C]+=p,B[C]!=Xe)break;B[C--]=0,p=1}for(d=B.length;B[--d]===0;B.pop());}a.e>O?a.c=a.e=null:a.e<P&&(a.c=[a.e=0])}return a}function X(a){var y,f=a.e;return f===null?a.toString():(y=$e(a.c),y=f<=g||f>=w?mr(y,f):st(y,f,"0"),a.s<0?"-"+y:y)}return i.absoluteValue=i.abs=function(){var a=new c(this);return a.s<0&&(a.s=1),a},i.comparedTo=function(a,y){return St(this,new c(a,y))},i.decimalPlaces=i.dp=function(a,y){var f,h,b,d=this;if(a!=null)return Re(a,0,Ne),y==null?y=l:Re(y,0,8),J(new c(d),a+d.e+1,y);if(!(f=d.c))return null;if(h=((b=f.length-1)-Ge(this.e/pe))*pe,b=f[b])for(;b%10==0;b/=10,h--);return h<0&&(h=0),h},i.dividedBy=i.div=function(a,y){return e(this,new c(a,y),o,l)},i.dividedToIntegerBy=i.idiv=function(a,y){return e(this,new c(a,y),0,1)},i.exponentiatedBy=i.pow=function(a,y){var f,h,b,d,N,p,S,C,_,B=this;if(a=new c(a),a.c&&!a.isInteger())throw Error(qe+"Exponent not an integer: "+X(a));if(y!=null&&(y=new c(y)),p=a.e>14,!B.c||!B.c[0]||B.c[0]==1&&!B.e&&B.c.length==1||!a.c||!a.c[0])return _=new c(Math.pow(+X(B),p?a.s*(2-_r(a)):+X(a))),y?_.mod(y):_;if(S=a.s<0,y){if(y.c?!y.c[0]:!y.s)return new c(NaN);h=!S&&B.isInteger()&&y.isInteger(),h&&(B=B.mod(y))}else{if(a.e>9&&(B.e>0||B.e<-1||(B.e==0?B.c[0]>1||p&&B.c[1]>=24e7:B.c[0]<8e13||p&&B.c[0]<=9999975e7)))return d=B.s<0&&_r(a)?-0:0,B.e>-1&&(d=1/d),new c(S?1/d:d);k&&(d=on(k/pe+2))}for(p?(f=new c(.5),S&&(a.s=1),C=_r(a)):(b=Math.abs(+X(a)),C=b%2),_=new c(s);;){if(C){if(_=_.times(B),!_.c)break;d?_.c.length>d&&(_.c.length=d):h&&(_=_.mod(y))}if(b){if(b=ze(b/2),b===0)break;C=b%2}else if(a=a.times(f),J(a,a.e+1,1),a.e>14)C=_r(a);else{if(b=+X(a),b===0)break;C=b%2}B=B.times(B),d?B.c&&B.c.length>d&&(B.c.length=d):h&&(B=B.mod(y))}return h?_:(S&&(_=s.div(_)),y?_.mod(y):d?J(_,k,l,N):_)},i.integerValue=function(a){var y=new c(this);return a==null?a=l:Re(a,0,8),J(y,y.e+1,a)},i.isEqualTo=i.eq=function(a,y){return St(this,new c(a,y))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(a,y){return St(this,new c(a,y))>0},i.isGreaterThanOrEqualTo=i.gte=function(a,y){return(y=St(this,new c(a,y)))===1||y===0},i.isInteger=function(){return!!this.c&&Ge(this.e/pe)>this.c.length-2},i.isLessThan=i.lt=function(a,y){return St(this,new c(a,y))<0},i.isLessThanOrEqualTo=i.lte=function(a,y){return(y=St(this,new c(a,y)))===-1||y===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(a,y){var f,h,b,d,N=this,p=N.s;if(a=new c(a,y),y=a.s,!p||!y)return new c(NaN);if(p!=y)return a.s=-y,N.plus(a);var S=N.e/pe,C=a.e/pe,_=N.c,B=a.c;if(!S||!C){if(!_||!B)return _?(a.s=-y,a):new c(B?N:NaN);if(!_[0]||!B[0])return B[0]?(a.s=-y,a):new c(_[0]?N:l==3?-0:0)}if(S=Ge(S),C=Ge(C),_=_.slice(),p=S-C){for((d=p<0)?(p=-p,b=_):(C=S,b=B),b.reverse(),y=p;y--;b.push(0));b.reverse()}else for(h=(d=(p=_.length)<(y=B.length))?p:y,p=y=0;y<h;y++)if(_[y]!=B[y]){d=_[y]<B[y];break}if(d&&(b=_,_=B,B=b,a.s=-a.s),y=(h=B.length)-(f=_.length),y>0)for(;y--;_[f++]=0);for(y=Xe-1;h>p;){if(_[--h]<B[h]){for(f=h;f&&!_[--f];_[f]=y);--_[f],_[h]+=Xe}_[h]-=B[h]}for(;_[0]==0;_.splice(0,1),--C);return _[0]?$(a,_,C):(a.s=l==3?-1:1,a.c=[a.e=0],a)},i.modulo=i.mod=function(a,y){var f,h,b=this;return a=new c(a,y),!b.c||!a.s||a.c&&!a.c[0]?new c(NaN):!a.c||b.c&&!b.c[0]?new c(b):(q==9?(h=a.s,a.s=1,f=e(b,a,0,3),a.s=h,f.s*=h):f=e(b,a,0,q),a=b.minus(f.times(a)),!a.c[0]&&q==1&&(a.s=b.s),a)},i.multipliedBy=i.times=function(a,y){var f,h,b,d,N,p,S,C,_,B,E,j,K,W,ee,Q=this,le=Q.c,ue=(a=new c(a,y)).c;if(!le||!ue||!le[0]||!ue[0])return!Q.s||!a.s||le&&!le[0]&&!ue||ue&&!ue[0]&&!le?a.c=a.e=a.s=null:(a.s*=Q.s,!le||!ue?a.c=a.e=null:(a.c=[0],a.e=0)),a;for(h=Ge(Q.e/pe)+Ge(a.e/pe),a.s*=Q.s,S=le.length,B=ue.length,S<B&&(K=le,le=ue,ue=K,b=S,S=B,B=b),b=S+B,K=[];b--;K.push(0));for(W=Xe,ee=gt,b=B;--b>=0;){for(f=0,E=ue[b]%ee,j=ue[b]/ee|0,N=S,d=b+N;d>b;)C=le[--N]%ee,_=le[N]/ee|0,p=j*C+_*E,C=E*C+p%ee*ee+K[d]+f,f=(C/W|0)+(p/ee|0)+j*_,K[d--]=C%W;K[d]=f}return f?++h:K.splice(0,1),$(a,K,h)},i.negated=function(){var a=new c(this);return a.s=-a.s||null,a},i.plus=function(a,y){var f,h=this,b=h.s;if(a=new c(a,y),y=a.s,!b||!y)return new c(NaN);if(b!=y)return a.s=-y,h.minus(a);var d=h.e/pe,N=a.e/pe,p=h.c,S=a.c;if(!d||!N){if(!p||!S)return new c(b/0);if(!p[0]||!S[0])return S[0]?a:new c(p[0]?h:b*0)}if(d=Ge(d),N=Ge(N),p=p.slice(),b=d-N){for(b>0?(N=d,f=S):(b=-b,f=p),f.reverse();b--;f.push(0));f.reverse()}for(b=p.length,y=S.length,b-y<0&&(f=S,S=p,p=f,y=b),b=0;y;)b=(p[--y]=p[y]+S[y]+b)/Xe|0,p[y]=Xe===p[y]?0:p[y]%Xe;return b&&(p=[b].concat(p),++N),$(a,p,N)},i.precision=i.sd=function(a,y){var f,h,b,d=this;if(a!=null&&a!==!!a)return Re(a,1,Ne),y==null?y=l:Re(y,0,8),J(new c(d),a,y);if(!(f=d.c))return null;if(b=f.length-1,h=b*pe+1,b=f[b]){for(;b%10==0;b/=10,h--);for(b=f[0];b>=10;b/=10,h++);}return a&&d.e+1>h&&(h=d.e+1),h},i.shiftedBy=function(a){return Re(a,-sn,sn),this.times("1e"+a)},i.squareRoot=i.sqrt=function(){var a,y,f,h,b,d=this,N=d.c,p=d.s,S=d.e,C=o+4,_=new c("0.5");if(p!==1||!N||!N[0])return new c(!p||p<0&&(!N||N[0])?NaN:N?d:1/0);if(p=Math.sqrt(+X(d)),p==0||p==1/0?(y=$e(N),(y.length+S)%2==0&&(y+="0"),p=Math.sqrt(+y),S=Ge((S+1)/2)-(S<0||S%2),p==1/0?y="5e"+S:(y=p.toExponential(),y=y.slice(0,y.indexOf("e")+1)+S),f=new c(y)):f=new c(p+""),f.c[0]){for(S=f.e,p=S+C,p<3&&(p=0);;)if(b=f,f=_.times(b.plus(e(d,b,C,1))),$e(b.c).slice(0,p)===(y=$e(f.c)).slice(0,p))if(f.e<S&&--p,y=y.slice(p-3,p+1),y=="9999"||!h&&y=="4999"){if(!h&&(J(b,b.e+o+2,0),b.times(b).eq(d))){f=b;break}C+=4,p+=4,h=1}else{(!+y||!+y.slice(1)&&y.charAt(0)=="5")&&(J(f,f.e+o+2,1),a=!f.times(f).eq(d));break}}return J(f,f.e+o+1,l,a)},i.toExponential=function(a,y){return a!=null&&(Re(a,0,Ne),a++),v(this,a,y,1)},i.toFixed=function(a,y){return a!=null&&(Re(a,0,Ne),a=a+this.e+1),v(this,a,y)},i.toFormat=function(a,y,f){var h,b=this;if(f==null)a!=null&&y&&typeof y=="object"?(f=y,y=null):a&&typeof a=="object"?(f=a,a=y=null):f=I;else if(typeof f!="object")throw Error(qe+"Argument not an object: "+f);if(h=b.toFixed(a,y),b.c){var d,N=h.split("."),p=+f.groupSize,S=+f.secondaryGroupSize,C=f.groupSeparator||"",_=N[0],B=N[1],E=b.s<0,j=E?_.slice(1):_,K=j.length;if(S&&(d=p,p=S,S=d,K-=d),p>0&&K>0){for(d=K%p||p,_=j.substr(0,d);d<K;d+=p)_+=C+j.substr(d,p);S>0&&(_+=C+j.slice(d)),E&&(_="-"+_)}h=B?_+(f.decimalSeparator||"")+((S=+f.fractionGroupSize)?B.replace(new RegExp("\\d{"+S+"}\\B","g"),"$&"+(f.fractionGroupSeparator||"")):B):_}return(f.prefix||"")+h+(f.suffix||"")},i.toFraction=function(a){var y,f,h,b,d,N,p,S,C,_,B,E,j=this,K=j.c;if(a!=null&&(p=new c(a),!p.isInteger()&&(p.c||p.s!==1)||p.lt(s)))throw Error(qe+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+X(p));if(!K)return new c(j);for(y=new c(s),C=f=new c(s),h=S=new c(s),E=$e(K),d=y.e=E.length-j.e-1,y.c[0]=an[(N=d%pe)<0?pe+N:N],a=!a||p.comparedTo(y)>0?d>0?y:C:p,N=O,O=1/0,p=new c(E),S.c[0]=0;_=e(p,y,0,1),b=f.plus(_.times(h)),b.comparedTo(a)!=1;)f=h,h=b,C=S.plus(_.times(b=C)),S=b,y=p.minus(_.times(b=y)),p=b;return b=e(a.minus(f),h,0,1),S=S.plus(b.times(C)),f=f.plus(b.times(h)),S.s=C.s=j.s,d=d*2,B=e(C,h,d,l).minus(j).abs().comparedTo(e(S,f,d,l).minus(j).abs())<1?[C,h]:[S,f],O=N,B},i.toNumber=function(){return+X(this)},i.toPrecision=function(a,y){return a!=null&&Re(a,1,Ne),v(this,a,y,2)},i.toString=function(a){var y,f=this,h=f.s,b=f.e;return b===null?h?(y="Infinity",h<0&&(y="-"+y)):y="NaN":(a==null?y=b<=g||b>=w?mr($e(f.c),b):st($e(f.c),b,"0"):a===10&&u?(f=J(new c(f),o+b+1,l),y=st($e(f.c),f.e,"0")):(Re(a,2,m.length,"Base"),y=t(st($e(f.c),b,"0"),10,a,h,!0)),h<0&&f.c[0]&&(y="-"+y)),y},i.valueOf=i.toJSON=function(){return X(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&c.set(r),c}function Ge(r){var e=r|0;return r>0||r===e?e:e-1}function $e(r){for(var e,t,n=1,i=r.length,s=r[0]+"";n<i;){for(e=r[n++]+"",t=pe-e.length;t--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function St(r,e){var t,n,i=r.c,s=e.c,o=r.s,l=e.s,g=r.e,w=e.e;if(!o||!l)return null;if(t=i&&!i[0],n=s&&!s[0],t||n)return t?n?0:-l:o;if(o!=l)return o;if(t=o<0,n=g==w,!i||!s)return n?0:!i^t?1:-1;if(!n)return g>w^t?1:-1;for(l=(g=i.length)<(w=s.length)?g:w,o=0;o<l;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return g==w?0:g>w^t?1:-1}function Re(r,e,t,n){if(r<e||r>t||r!==ze(r))throw Error(qe+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function _r(r){var e=r.c.length-1;return Ge(r.e/pe)==e&&r.c[e]%2!=0}function mr(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function st(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}$o();var ln={},Ri;function na(){if(Ri)return ln;Ri=1;var r=Qs().Buffer,e=r.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(u){if(!u)return"utf8";for(var c;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(c)return;u=(""+u).toLowerCase(),c=!0}}function n(u){var c=t(u);if(typeof c!="string"&&(r.isEncoding===e||!e(u)))throw new Error("Unknown encoding: "+u);return c||u}ln.StringDecoder=i;function i(u){this.encoding=n(u);var c;switch(this.encoding){case"utf16le":this.text=O,this.end=R,c=4;break;case"utf8":this.fillLast=g,c=4;break;case"base64":this.text=q,this.end=k,c=3;break;default:this.write=I,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(c)}i.prototype.write=function(u){if(u.length===0)return"";var c,v;if(this.lastNeed){if(c=this.fillLast(u),c===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<u.length?c?c+this.text(u,v):this.text(u,v):c||""},i.prototype.end=P,i.prototype.text=w,i.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function s(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function o(u,c,v){var G=c.length-1;if(G<v)return 0;var $=s(c[G]);return $>=0?($>0&&(u.lastNeed=$-1),$):--G<v||$===-2?0:($=s(c[G]),$>=0?($>0&&(u.lastNeed=$-2),$):--G<v||$===-2?0:($=s(c[G]),$>=0?($>0&&($===2?$=0:u.lastNeed=$-3),$):0))}function l(u,c,v){if((c[0]&192)!==128)return u.lastNeed=0,"�";if(u.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return u.lastNeed=1,"�";if(u.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return u.lastNeed=2,"�"}}function g(u){var c=this.lastTotal-this.lastNeed,v=l(this,u);if(v!==void 0)return v;if(this.lastNeed<=u.length)return u.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,c,0,u.length),this.lastNeed-=u.length}function w(u,c){var v=o(this,u,c);if(!this.lastNeed)return u.toString("utf8",c);this.lastTotal=v;var G=u.length-(v-this.lastNeed);return u.copy(this.lastChar,0,G),u.toString("utf8",c,G)}function P(u){var c=u&&u.length?this.write(u):"";return this.lastNeed?c+"�":c}function O(u,c){if((u.length-c)%2===0){var v=u.toString("utf16le",c);if(v){var G=v.charCodeAt(v.length-1);if(G>=55296&&G<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",c,u.length-1)}function R(u){var c=u&&u.length?this.write(u):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,v)}return c}function q(u,c){var v=(u.length-c)%3;return v===0?u.toString("base64",c):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",c,u.length-v))}function k(u){var c=u&&u.length?this.write(u):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function I(u){return u.toString(this.encoding)}function m(u){return u&&u.length?this.write(u):""}return ln}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function ia(r,e){if(Qt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Qt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function oa(r){var e=ia(r,"string");return Qt(e)=="symbol"?e:e+""}function ge(r,e,t){return(e=oa(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ii(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ii(Object(t),!0).forEach(function(n){ge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ii(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var un={exports:{}},fn={exports:{}},cn,Ti;function Ie(){if(Ti)return cn;Ti=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let i=0;i<t.length;i++)n+=`    ${t[i].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return cn={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},cn}var dn={exports:{}},hn,xi;function Ho(){return xi||(xi=1,hn={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),hn}var gn,Oi;function De(){if(Oi)return gn;Oi=1;const{format:r,inspect:e}=Ho(),{AggregateError:t}=Ie(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",g={};function w(m,u){if(!m)throw new g.ERR_INTERNAL_ASSERTION(u)}function P(m){let u="",c=m.length;const v=m[0]==="-"?1:0;for(;c>=v+4;c-=3)u=`_${m.slice(c-3,c)}${u}`;return`${m.slice(0,c)}${u}`}function O(m,u,c){if(typeof u=="function")return w(u.length<=c.length,`Code: ${m}; The provided arguments length (${c.length}) does not match the required ones (${u.length}).`),u(...c);const v=(u.match(/%[dfijoOs]/g)||[]).length;return w(v===c.length,`Code: ${m}; The provided arguments length (${c.length}) does not match the required ones (${v}).`),c.length===0?u:r(u,...c)}function R(m,u,c){c||(c=Error);class v extends c{constructor(...$){super(O(m,u,$))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=m,v.prototype[i]=!0,g[m]=v}function q(m){const u=l+m.name;return Object.defineProperty(m,"name",{value:u}),m}function k(m,u){if(m&&u&&m!==u){if(Array.isArray(u.errors))return u.errors.push(m),u;const c=new n([u,m],u.message);return c.code=u.code,c}return m||u}class I extends Error{constructor(u="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new g.ERR_INVALID_ARG_TYPE("options","Object",c);super(u,c),this.code="ABORT_ERR",this.name="AbortError"}}return R("ERR_ASSERTION","%s",Error),R("ERR_INVALID_ARG_TYPE",(m,u,c)=>{w(typeof m=="string","'name' must be a string"),Array.isArray(u)||(u=[u]);let v="The ";m.endsWith(" argument")?v+=`${m} `:v+=`"${m}" ${m.includes(".")?"property":"argument"} `,v+="must be ";const G=[],$=[],J=[];for(const a of u)w(typeof a=="string","All expected entries have to be of type string"),s.includes(a)?G.push(a.toLowerCase()):o.test(a)?$.push(a):(w(a!=="object",'The value "object" should be written as "Object"'),J.push(a));if($.length>0){const a=G.indexOf("object");a!==-1&&(G.splice(G,a,1),$.push("Object"))}if(G.length>0){switch(G.length){case 1:v+=`of type ${G[0]}`;break;case 2:v+=`one of type ${G[0]} or ${G[1]}`;break;default:{const a=G.pop();v+=`one of type ${G.join(", ")}, or ${a}`}}($.length>0||J.length>0)&&(v+=" or ")}if($.length>0){switch($.length){case 1:v+=`an instance of ${$[0]}`;break;case 2:v+=`an instance of ${$[0]} or ${$[1]}`;break;default:{const a=$.pop();v+=`an instance of ${$.join(", ")}, or ${a}`}}J.length>0&&(v+=" or ")}switch(J.length){case 0:break;case 1:J[0].toLowerCase()!==J[0]&&(v+="an "),v+=`${J[0]}`;break;case 2:v+=`one of ${J[0]} or ${J[1]}`;break;default:{const a=J.pop();v+=`one of ${J.join(", ")}, or ${a}`}}if(c==null)v+=`. Received ${c}`;else if(typeof c=="function"&&c.name)v+=`. Received function ${c.name}`;else if(typeof c=="object"){var X;if((X=c.constructor)!==null&&X!==void 0&&X.name)v+=`. Received an instance of ${c.constructor.name}`;else{const a=e(c,{depth:-1});v+=`. Received ${a}`}}else{let a=e(c,{colors:!1});a.length>25&&(a=`${a.slice(0,25)}...`),v+=`. Received type ${typeof c} (${a})`}return v},TypeError),R("ERR_INVALID_ARG_VALUE",(m,u,c="is invalid")=>{let v=e(u);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${c}. Received ${v}`},TypeError),R("ERR_INVALID_RETURN_VALUE",(m,u,c)=>{var v;const G=c!=null&&(v=c.constructor)!==null&&v!==void 0&&v.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${m} to be returned from the "${u}" function but got ${G}.`},TypeError),R("ERR_MISSING_ARGS",(...m)=>{w(m.length>0,"At least one arg needs to be specified");let u;const c=m.length;switch(m=(Array.isArray(m)?m:[m]).map(v=>`"${v}"`).join(" or "),c){case 1:u+=`The ${m[0]} argument`;break;case 2:u+=`The ${m[0]} and ${m[1]} arguments`;break;default:{const v=m.pop();u+=`The ${m.join(", ")}, and ${v} arguments`}break}return`${u} must be specified`},TypeError),R("ERR_OUT_OF_RANGE",(m,u,c)=>{w(u,'Missing "range" argument');let v;if(Number.isInteger(c)&&Math.abs(c)>2**32)v=P(String(c));else if(typeof c=="bigint"){v=String(c);const G=BigInt(2)**BigInt(32);(c>G||c<-G)&&(v=P(v)),v+="n"}else v=e(c);return`The value of "${m}" is out of range. It must be ${u}. Received ${v}`},RangeError),R("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),R("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),R("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),R("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),R("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),R("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),R("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),R("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),R("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),R("ERR_STREAM_WRITE_AFTER_END","write after end",Error),R("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),gn={AbortError:I,aggregateTwoErrors:q(k),hideStackFrames:q,codes:g},gn}var Vt={exports:{}},Ni;function er(){if(Ni)return Vt.exports;Ni=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Vt.exports=r,Vt.exports.AbortSignal=e,Vt.exports.default=r,Vt.exports}var Ci;function We(){return Ci||(Ci=1,function(r){const e=Ct(),{format:t,inspect:n}=Ho(),{codes:{ERR_INVALID_ARG_TYPE:i}}=De(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:l}=Ie(),g=globalThis.AbortSignal||er().AbortSignal,w=globalThis.AbortController||er().AbortController,P=Object.getPrototypeOf(async function(){}).constructor,O=globalThis.Blob||e.Blob,R=typeof O<"u"?function(m){return m instanceof O}:function(m){return!1},q=(I,m)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new i(m,"AbortSignal",I)},k=(I,m)=>{if(typeof I!="function")throw new i(m,"Function",I)};r.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(I){let m=!1;return function(...u){m||(m=!0,I.apply(this,u))}},createDeferredPromise:function(){let I,m;return{promise:new Promise((c,v)=>{I=c,m=v}),resolve:I,reject:m}},promisify(I){return new Promise((m,u)=>{I((c,...v)=>c?u(c):m(...v))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(I){return I instanceof P},isArrayBufferView(I){return ArrayBuffer.isView(I)}},isBlob:R,deprecate(I,m){return I},addAbortListener:Lr().addAbortListener||function(m,u){if(m===void 0)throw new i("signal","AbortSignal",m);q(m,"signal"),k(u,"listener");let c;return m.aborted?queueMicrotask(()=>u()):(m.addEventListener("abort",u,{__proto__:null,once:!0,[s]:!0}),c=()=>{m.removeEventListener("abort",u)}),{__proto__:null,[l](){var v;(v=c)===null||v===void 0||v()}}},AbortSignalAny:g.any||function(m){if(m.length===1)return m[0];const u=new w,c=()=>u.abort();return m.forEach(v=>{q(v,"signals"),v.addEventListener("abort",c,{once:!0})}),u.signal.addEventListener("abort",()=>{m.forEach(v=>v.removeEventListener("abort",c))},{once:!0}),u.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(dn)),dn.exports}var Er={},pn,Pi;function rr(){if(Pi)return pn;Pi=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:l,NumberParseInt:g,ObjectPrototypeHasOwnProperty:w,RegExpPrototypeExec:P,String:O,StringPrototypeToUpperCase:R,StringPrototypeTrim:q}=Ie(),{hideStackFrames:k,codes:{ERR_SOCKET_BAD_PORT:I,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:u,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:v}}=De(),{normalizeEncoding:G}=We(),{isAsyncFunction:$,isArrayBufferView:J}=We().types,X={};function a(D){return D===(D|0)}function y(D){return D===D>>>0}const f=/^[0-7]+$/,h="must be a 32-bit unsigned integer or an octal string";function b(D,Z,re){if(typeof D>"u"&&(D=re),typeof D=="string"){if(P(f,D)===null)throw new u(Z,D,h);D=g(D,8)}return p(D,Z),D}const d=k((D,Z,re=l,Y=o)=>{if(typeof D!="number")throw new m(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);if(D<re||D>Y)throw new c(Z,`>= ${re} && <= ${Y}`,D)}),N=k((D,Z,re=-2147483648,Y=2147483647)=>{if(typeof D!="number")throw new m(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);if(D<re||D>Y)throw new c(Z,`>= ${re} && <= ${Y}`,D)}),p=k((D,Z,re=!1)=>{if(typeof D!="number")throw new m(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);const Y=re?1:0,we=4294967295;if(D<Y||D>we)throw new c(Z,`>= ${Y} && <= ${we}`,D)});function S(D,Z){if(typeof D!="string")throw new m(Z,"string",D)}function C(D,Z,re=void 0,Y){if(typeof D!="number")throw new m(Z,"number",D);if(re!=null&&D<re||Y!=null&&D>Y||(re!=null||Y!=null)&&s(D))throw new c(Z,`${re!=null?`>= ${re}`:""}${re!=null&&Y!=null?" && ":""}${Y!=null?`<= ${Y}`:""}`,D)}const _=k((D,Z,re)=>{if(!e(re,D)){const we="must be one of: "+t(n(re,Pe=>typeof Pe=="string"?`'${Pe}'`:O(Pe)),", ");throw new u(Z,D,we)}});function B(D,Z){if(typeof D!="boolean")throw new m(Z,"boolean",D)}function E(D,Z,re){return D==null||!w(D,Z)?re:D[Z]}const j=k((D,Z,re=null)=>{const Y=E(re,"allowArray",!1),we=E(re,"allowFunction",!1);if(!E(re,"nullable",!1)&&D===null||!Y&&r(D)||typeof D!="object"&&(!we||typeof D!="function"))throw new m(Z,"Object",D)}),K=k((D,Z)=>{if(D!=null&&typeof D!="object"&&typeof D!="function")throw new m(Z,"a dictionary",D)}),W=k((D,Z,re=0)=>{if(!r(D))throw new m(Z,"Array",D);if(D.length<re){const Y=`must be longer than ${re}`;throw new u(Z,D,Y)}});function ee(D,Z){W(D,Z);for(let re=0;re<D.length;re++)S(D[re],`${Z}[${re}]`)}function Q(D,Z){W(D,Z);for(let re=0;re<D.length;re++)B(D[re],`${Z}[${re}]`)}function le(D,Z){W(D,Z);for(let re=0;re<D.length;re++){const Y=D[re],we=`${Z}[${re}]`;if(Y==null)throw new m(we,"AbortSignal",Y);ce(Y,we)}}function ue(D,Z="signal"){if(S(D,Z),X[D]===void 0)throw X[R(D)]!==void 0?new v(D+" (signals must use all capital letters)"):new v(D)}const z=k((D,Z="buffer")=>{if(!J(D))throw new m(Z,["Buffer","TypedArray","DataView"],D)});function V(D,Z){const re=G(Z),Y=D.length;if(re==="hex"&&Y%2!==0)throw new u("encoding",Z,`is invalid for data of length ${Y}`)}function oe(D,Z="Port",re=!0){if(typeof D!="number"&&typeof D!="string"||typeof D=="string"&&q(D).length===0||+D!==+D>>>0||D>65535||D===0&&!re)throw new I(Z,D,re);return D|0}const ce=k((D,Z)=>{if(D!==void 0&&(D===null||typeof D!="object"||!("aborted"in D)))throw new m(Z,"AbortSignal",D)}),fe=k((D,Z)=>{if(typeof D!="function")throw new m(Z,"Function",D)}),L=k((D,Z)=>{if(typeof D!="function"||$(D))throw new m(Z,"Function",D)}),M=k((D,Z)=>{if(D!==void 0)throw new m(Z,"undefined",D)});function F(D,Z,re){if(!e(re,D))throw new m(Z,`('${t(re,"|")}')`,D)}const ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function se(D,Z){if(typeof D>"u"||!P(ne,D))throw new u(Z,D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(D){if(typeof D=="string")return se(D,"hints"),D;if(r(D)){const Z=D.length;let re="";if(Z===0)return re;for(let Y=0;Y<Z;Y++){const we=D[Y];se(we,"hints"),re+=we,Y!==Z-1&&(re+=", ")}return re}throw new u("hints",D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return pn={isInt32:a,isUint32:y,parseFileMode:b,validateArray:W,validateStringArray:ee,validateBooleanArray:Q,validateAbortSignalArray:le,validateBoolean:B,validateBuffer:z,validateDictionary:K,validateEncoding:V,validateFunction:fe,validateInt32:N,validateInteger:d,validateNumber:C,validateObject:j,validateOneOf:_,validatePlainFunction:L,validatePort:oe,validateSignalName:ue,validateString:S,validateUint32:p,validateUndefined:M,validateUnion:F,validateAbortSignal:ce,validateLinkHeaderValue:ie},pn}var vr={exports:{}},wn,Li;function dt(){if(Li)return wn;Li=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Ie(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),s=t("nodejs.stream.readable"),o=t("nodejs.stream.writable"),l=t("nodejs.stream.disturbed"),g=t("nodejs.webstream.isClosedPromise"),w=t("nodejs.webstream.controllerErrorFunction");function P(E,j=!1){var K;return!!(E&&typeof E.pipe=="function"&&typeof E.on=="function"&&(!j||typeof E.pause=="function"&&typeof E.resume=="function")&&(!E._writableState||((K=E._readableState)===null||K===void 0?void 0:K.readable)!==!1)&&(!E._writableState||E._readableState))}function O(E){var j;return!!(E&&typeof E.write=="function"&&typeof E.on=="function"&&(!E._readableState||((j=E._writableState)===null||j===void 0?void 0:j.writable)!==!1))}function R(E){return!!(E&&typeof E.pipe=="function"&&E._readableState&&typeof E.on=="function"&&typeof E.write=="function")}function q(E){return E&&(E._readableState||E._writableState||typeof E.write=="function"&&typeof E.on=="function"||typeof E.pipe=="function"&&typeof E.on=="function")}function k(E){return!!(E&&!q(E)&&typeof E.pipeThrough=="function"&&typeof E.getReader=="function"&&typeof E.cancel=="function")}function I(E){return!!(E&&!q(E)&&typeof E.getWriter=="function"&&typeof E.abort=="function")}function m(E){return!!(E&&!q(E)&&typeof E.readable=="object"&&typeof E.writable=="object")}function u(E){return k(E)||I(E)||m(E)}function c(E,j){return E==null?!1:j===!0?typeof E[r]=="function":j===!1?typeof E[e]=="function":typeof E[r]=="function"||typeof E[e]=="function"}function v(E){if(!q(E))return null;const j=E._writableState,K=E._readableState,W=j||K;return!!(E.destroyed||E[n]||W!=null&&W.destroyed)}function G(E){if(!O(E))return null;if(E.writableEnded===!0)return!0;const j=E._writableState;return j!=null&&j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function $(E,j){if(!O(E))return null;if(E.writableFinished===!0)return!0;const K=E._writableState;return K!=null&&K.errored?!1:typeof K?.finished!="boolean"?null:!!(K.finished||j===!1&&K.ended===!0&&K.length===0)}function J(E){if(!P(E))return null;if(E.readableEnded===!0)return!0;const j=E._readableState;return!j||j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function X(E,j){if(!P(E))return null;const K=E._readableState;return K!=null&&K.errored?!1:typeof K?.endEmitted!="boolean"?null:!!(K.endEmitted||j===!1&&K.ended===!0&&K.length===0)}function a(E){return E&&E[s]!=null?E[s]:typeof E?.readable!="boolean"?null:v(E)?!1:P(E)&&E.readable&&!X(E)}function y(E){return E&&E[o]!=null?E[o]:typeof E?.writable!="boolean"?null:v(E)?!1:O(E)&&E.writable&&!G(E)}function f(E,j){return q(E)?v(E)?!0:!(j?.readable!==!1&&a(E)||j?.writable!==!1&&y(E)):null}function h(E){var j,K;return q(E)?E.writableErrored?E.writableErrored:(j=(K=E._writableState)===null||K===void 0?void 0:K.errored)!==null&&j!==void 0?j:null:null}function b(E){var j,K;return q(E)?E.readableErrored?E.readableErrored:(j=(K=E._readableState)===null||K===void 0?void 0:K.errored)!==null&&j!==void 0?j:null:null}function d(E){if(!q(E))return null;if(typeof E.closed=="boolean")return E.closed;const j=E._writableState,K=E._readableState;return typeof j?.closed=="boolean"||typeof K?.closed=="boolean"?j?.closed||K?.closed:typeof E._closed=="boolean"&&N(E)?E._closed:null}function N(E){return typeof E._closed=="boolean"&&typeof E._defaultKeepAlive=="boolean"&&typeof E._removedConnection=="boolean"&&typeof E._removedContLen=="boolean"}function p(E){return typeof E._sent100=="boolean"&&N(E)}function S(E){var j;return typeof E._consuming=="boolean"&&typeof E._dumped=="boolean"&&((j=E.req)===null||j===void 0?void 0:j.upgradeOrConnect)===void 0}function C(E){if(!q(E))return null;const j=E._writableState,K=E._readableState,W=j||K;return!W&&p(E)||!!(W&&W.autoDestroy&&W.emitClose&&W.closed===!1)}function _(E){var j;return!!(E&&((j=E[l])!==null&&j!==void 0?j:E.readableDidRead||E.readableAborted))}function B(E){var j,K,W,ee,Q,le,ue,z,V,oe;return!!(E&&((j=(K=(W=(ee=(Q=(le=E[i])!==null&&le!==void 0?le:E.readableErrored)!==null&&Q!==void 0?Q:E.writableErrored)!==null&&ee!==void 0?ee:(ue=E._readableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&W!==void 0?W:(z=E._writableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&K!==void 0?K:(V=E._readableState)===null||V===void 0?void 0:V.errored)!==null&&j!==void 0?j:!((oe=E._writableState)===null||oe===void 0)&&oe.errored))}return wn={isDestroyed:v,kIsDestroyed:n,isDisturbed:_,kIsDisturbed:l,isErrored:B,kIsErrored:i,isReadable:a,kIsReadable:s,kIsClosedPromise:g,kControllerErrorFunction:w,kIsWritable:o,isClosed:d,isDuplexNodeStream:R,isFinished:f,isIterable:c,isReadableNodeStream:P,isReadableStream:k,isReadableEnded:J,isReadableFinished:X,isReadableErrored:b,isNodeStream:q,isWebStream:u,isWritable:y,isWritableNodeStream:O,isWritableStream:I,isWritableEnded:G,isWritableFinished:$,isWritableErrored:h,isServerRequest:S,isServerResponse:p,willEmitClose:C,isTransformStream:m},wn}var Bi;function _t(){if(Bi)return vr.exports;Bi=1;const r=Pt(),{AbortError:e,codes:t}=De(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:s,once:o}=We(),{validateAbortSignal:l,validateFunction:g,validateObject:w,validateBoolean:P}=rr(),{Promise:O,PromisePrototypeThen:R,SymbolDispose:q}=Ie(),{isClosed:k,isReadable:I,isReadableNodeStream:m,isReadableStream:u,isReadableFinished:c,isReadableErrored:v,isWritable:G,isWritableNodeStream:$,isWritableStream:J,isWritableFinished:X,isWritableErrored:a,isNodeStream:y,willEmitClose:f,kIsClosedPromise:h}=dt();let b;function d(_){return _.setHeader&&typeof _.abort=="function"}const N=()=>{};function p(_,B,E){var j,K;if(arguments.length===2?(E=B,B=s):B==null?B=s:w(B,"options"),g(E,"callback"),l(B.signal,"options.signal"),E=o(E),u(_)||J(_))return S(_,B,E);if(!y(_))throw new n("stream",["ReadableStream","WritableStream","Stream"],_);const W=(j=B.readable)!==null&&j!==void 0?j:m(_),ee=(K=B.writable)!==null&&K!==void 0?K:$(_),Q=_._writableState,le=_._readableState,ue=()=>{_.writable||oe()};let z=f(_)&&m(_)===W&&$(_)===ee,V=X(_,!1);const oe=()=>{V=!0,_.destroyed&&(z=!1),!(z&&(!_.readable||W))&&(!W||ce)&&E.call(_)};let ce=c(_,!1);const fe=()=>{ce=!0,_.destroyed&&(z=!1),!(z&&(!_.writable||ee))&&(!ee||V)&&E.call(_)},L=D=>{E.call(_,D)};let M=k(_);const F=()=>{M=!0;const D=a(_)||v(_);if(D&&typeof D!="boolean")return E.call(_,D);if(W&&!ce&&m(_,!0)&&!c(_,!1))return E.call(_,new i);if(ee&&!V&&!X(_,!1))return E.call(_,new i);E.call(_)},ne=()=>{M=!0;const D=a(_)||v(_);if(D&&typeof D!="boolean")return E.call(_,D);E.call(_)},se=()=>{_.req.on("finish",oe)};d(_)?(_.on("complete",oe),z||_.on("abort",F),_.req?se():_.on("request",se)):ee&&!Q&&(_.on("end",ue),_.on("close",ue)),!z&&typeof _.aborted=="boolean"&&_.on("aborted",F),_.on("end",fe),_.on("finish",oe),B.error!==!1&&_.on("error",L),_.on("close",F),M?r.nextTick(F):Q!=null&&Q.errorEmitted||le!=null&&le.errorEmitted?z||r.nextTick(ne):(!W&&(!z||I(_))&&(V||G(_)===!1)||!ee&&(!z||G(_))&&(ce||I(_)===!1)||le&&_.req&&_.aborted)&&r.nextTick(ne);const ie=()=>{E=N,_.removeListener("aborted",F),_.removeListener("complete",oe),_.removeListener("abort",F),_.removeListener("request",se),_.req&&_.req.removeListener("finish",oe),_.removeListener("end",ue),_.removeListener("close",ue),_.removeListener("finish",oe),_.removeListener("end",fe),_.removeListener("error",L),_.removeListener("close",F)};if(B.signal&&!M){const D=()=>{const Z=E;ie(),Z.call(_,new e(void 0,{cause:B.signal.reason}))};if(B.signal.aborted)r.nextTick(D);else{b=b||We().addAbortListener;const Z=b(B.signal,D),re=E;E=o((...Y)=>{Z[q](),re.apply(_,Y)})}}return ie}function S(_,B,E){let j=!1,K=N;if(B.signal)if(K=()=>{j=!0,E.call(_,new e(void 0,{cause:B.signal.reason}))},B.signal.aborted)r.nextTick(K);else{b=b||We().addAbortListener;const ee=b(B.signal,K),Q=E;E=o((...le)=>{ee[q](),Q.apply(_,le)})}const W=(...ee)=>{j||r.nextTick(()=>E.apply(_,ee))};return R(_[h].promise,W,W),N}function C(_,B){var E;let j=!1;return B===null&&(B=s),(E=B)!==null&&E!==void 0&&E.cleanup&&(P(B.cleanup,"cleanup"),j=B.cleanup),new O((K,W)=>{const ee=p(_,B,Q=>{j&&ee(),Q?W(Q):K()})})}return vr.exports=p,vr.exports.finished=C,vr.exports}var bn,Mi;function qt(){if(Mi)return bn;Mi=1;const r=Pt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=De(),{Symbol:i}=Ie(),{kIsDestroyed:s,isDestroyed:o,isFinished:l,isServerRequest:g}=dt(),w=i("kDestroy"),P=i("kConstruct");function O(f,h,b){f&&(f.stack,h&&!h.errored&&(h.errored=f),b&&!b.errored&&(b.errored=f))}function R(f,h){const b=this._readableState,d=this._writableState,N=d||b;return d!=null&&d.destroyed||b!=null&&b.destroyed?(typeof h=="function"&&h(),this):(O(f,d,b),d&&(d.destroyed=!0),b&&(b.destroyed=!0),N.constructed?q(this,f,h):this.once(w,function(p){q(this,e(p,f),h)}),this)}function q(f,h,b){let d=!1;function N(p){if(d)return;d=!0;const S=f._readableState,C=f._writableState;O(p,C,S),C&&(C.closed=!0),S&&(S.closed=!0),typeof b=="function"&&b(p),p?r.nextTick(k,f,p):r.nextTick(I,f)}try{f._destroy(h||null,N)}catch(p){N(p)}}function k(f,h){m(f,h),I(f)}function I(f){const h=f._readableState,b=f._writableState;b&&(b.closeEmitted=!0),h&&(h.closeEmitted=!0),(b!=null&&b.emitClose||h!=null&&h.emitClose)&&f.emit("close")}function m(f,h){const b=f._readableState,d=f._writableState;d!=null&&d.errorEmitted||b!=null&&b.errorEmitted||(d&&(d.errorEmitted=!0),b&&(b.errorEmitted=!0),f.emit("error",h))}function u(){const f=this._readableState,h=this._writableState;f&&(f.constructed=!0,f.closed=!1,f.closeEmitted=!1,f.destroyed=!1,f.errored=null,f.errorEmitted=!1,f.reading=!1,f.ended=f.readable===!1,f.endEmitted=f.readable===!1),h&&(h.constructed=!0,h.destroyed=!1,h.closed=!1,h.closeEmitted=!1,h.errored=null,h.errorEmitted=!1,h.finalCalled=!1,h.prefinished=!1,h.ended=h.writable===!1,h.ending=h.writable===!1,h.finished=h.writable===!1)}function c(f,h,b){const d=f._readableState,N=f._writableState;if(N!=null&&N.destroyed||d!=null&&d.destroyed)return this;d!=null&&d.autoDestroy||N!=null&&N.autoDestroy?f.destroy(h):h&&(h.stack,N&&!N.errored&&(N.errored=h),d&&!d.errored&&(d.errored=h),b?r.nextTick(m,f,h):m(f,h))}function v(f,h){if(typeof f._construct!="function")return;const b=f._readableState,d=f._writableState;b&&(b.constructed=!1),d&&(d.constructed=!1),f.once(P,h),!(f.listenerCount(P)>1)&&r.nextTick(G,f)}function G(f){let h=!1;function b(d){if(h){c(f,d??new t);return}h=!0;const N=f._readableState,p=f._writableState,S=p||N;N&&(N.constructed=!0),p&&(p.constructed=!0),S.destroyed?f.emit(w,d):d?c(f,d,!0):r.nextTick($,f)}try{f._construct(d=>{r.nextTick(b,d)})}catch(d){r.nextTick(b,d)}}function $(f){f.emit(P)}function J(f){return f?.setHeader&&typeof f.abort=="function"}function X(f){f.emit("close")}function a(f,h){f.emit("error",h),r.nextTick(X,f)}function y(f,h){!f||o(f)||(!h&&!l(f)&&(h=new n),g(f)?(f.socket=null,f.destroy(h)):J(f)?f.abort():J(f.req)?f.req.abort():typeof f.destroy=="function"?f.destroy(h):typeof f.close=="function"?f.close():h?r.nextTick(a,f,h):r.nextTick(X,f),f.destroyed||(f[s]=!0))}return bn={construct:v,destroyer:y,destroy:R,undestroy:u,errorOrDestroy:c},bn}var yn,Di;function ei(){if(Di)return yn;Di=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Ie(),{EventEmitter:t}=Lr();function n(s){t.call(this,s)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(s,o){const l=this;function g(I){s.writable&&s.write(I)===!1&&l.pause&&l.pause()}l.on("data",g);function w(){l.readable&&l.resume&&l.resume()}s.on("drain",w),!s._isStdio&&(!o||o.end!==!1)&&(l.on("end",O),l.on("close",R));let P=!1;function O(){P||(P=!0,s.end())}function R(){P||(P=!0,typeof s.destroy=="function"&&s.destroy())}function q(I){k(),t.listenerCount(this,"error")===0&&this.emit("error",I)}i(l,"error",q),i(s,"error",q);function k(){l.removeListener("data",g),s.removeListener("drain",w),l.removeListener("end",O),l.removeListener("close",R),l.removeListener("error",q),s.removeListener("error",q),l.removeListener("end",k),l.removeListener("close",k),s.removeListener("close",k)}return l.on("end",k),l.on("close",k),s.on("close",k),s.emit("pipe",l),s};function i(s,o,l){if(typeof s.prependListener=="function")return s.prependListener(o,l);!s._events||!s._events[o]?s.on(o,l):r(s._events[o])?s._events[o].unshift(l):s._events[o]=[l,s._events[o]]}return yn={Stream:n,prependListener:i},yn}var _n={exports:{}},ki;function Br(){return ki||(ki=1,function(r){const{SymbolDispose:e}=Ie(),{AbortError:t,codes:n}=De(),{isNodeStream:i,isWebStream:s,kControllerErrorFunction:o}=dt(),l=_t(),{ERR_INVALID_ARG_TYPE:g}=n;let w;const P=(O,R)=>{if(typeof O!="object"||!("aborted"in O))throw new g(R,"AbortSignal",O)};r.exports.addAbortSignal=function(R,q){if(P(R,"signal"),!i(q)&&!s(q))throw new g("stream",["ReadableStream","WritableStream","Stream"],q);return r.exports.addAbortSignalNoValidate(R,q)},r.exports.addAbortSignalNoValidate=function(O,R){if(typeof O!="object"||!("aborted"in O))return R;const q=i(R)?()=>{R.destroy(new t(void 0,{cause:O.reason}))}:()=>{R[o](new t(void 0,{cause:O.reason}))};if(O.aborted)q();else{w=w||We().addAbortListener;const k=w(O,q);l(R,k[e])}return R}}(_n)),_n.exports}var mn,Ui;function sa(){if(Ui)return mn;Ui=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Ie(),{Buffer:i}=Ct(),{inspect:s}=We();return mn=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){const g={data:l,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}unshift(l){const g={data:l,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}shift(){if(this.length===0)return;const l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let g=this.head,w=""+g.data;for(;(g=g.next)!==null;)w+=l+g.data;return w}concat(l){if(this.length===0)return i.alloc(0);const g=i.allocUnsafe(l>>>0);let w=this.head,P=0;for(;w;)t(g,w.data,P),P+=w.data.length,w=w.next;return g}consume(l,g){const w=this.head.data;if(l<w.length){const P=w.slice(0,l);return this.head.data=w.slice(l),P}return l===w.length?this.shift():g?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[e](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let g="",w=this.head,P=0;do{const O=w.data;if(l>O.length)g+=O,l-=O.length;else{l===O.length?(g+=O,++P,w.next?this.head=w.next:this.head=this.tail=null):(g+=r(O,0,l),this.head=w,w.data=r(O,l));break}++P}while((w=w.next)!==null);return this.length-=P,g}_getBuffer(l){const g=i.allocUnsafe(l),w=l;let P=this.head,O=0;do{const R=P.data;if(l>R.length)t(g,R,w-l),l-=R.length;else{l===R.length?(t(g,R,w-l),++O,P.next?this.head=P.next:this.head=this.tail=null):(t(g,new n(R.buffer,R.byteOffset,l),w-l),this.head=P,P.data=R.slice(l));break}++O}while((P=P.next)!==null);return this.length-=O,g}[Symbol.for("nodejs.util.inspect.custom")](l,g){return s(this,{...g,depth:0,customInspect:!1})}},mn}var En,qi;function Mr(){if(qi)return En;qi=1;const{MathFloor:r,NumberIsInteger:e}=Ie(),{validateInteger:t}=rr(),{ERR_INVALID_ARG_VALUE:n}=De().codes;let i=16*1024,s=16;function o(P,O,R){return P.highWaterMark!=null?P.highWaterMark:O?P[R]:null}function l(P){return P?s:i}function g(P,O){t(O,"value",0),P?s=O:i=O}function w(P,O,R,q){const k=o(O,q,R);if(k!=null){if(!e(k)||k<0){const I=q?`options.${R}`:"options.highWaterMark";throw new n(I,k)}return r(k)}return l(P.objectMode)}return En={getHighWaterMark:w,getDefaultHighWaterMark:l,setDefaultHighWaterMark:g},En}var vn,ji;function zo(){if(ji)return vn;ji=1;const r=Pt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Ie(),{Buffer:i}=Ct(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=De().codes;function l(g,w,P){let O;if(typeof w=="string"||w instanceof i)return new g({objectMode:!0,...P,read(){this.push(w),this.push(null)}});let R;if(w&&w[t])R=!0,O=w[t]();else if(w&&w[n])R=!1,O=w[n]();else throw new s("iterable",["Iterable"],w);const q=new g({objectMode:!0,highWaterMark:1,...P});let k=!1;q._read=function(){k||(k=!0,m())},q._destroy=function(u,c){e(I(u),()=>r.nextTick(c,u),v=>r.nextTick(c,v||u))};async function I(u){const c=u!=null,v=typeof O.throw=="function";if(c&&v){const{value:G,done:$}=await O.throw(u);if(await G,$)return}if(typeof O.return=="function"){const{value:G}=await O.return();await G}}async function m(){for(;;){try{const{value:u,done:c}=R?await O.next():O.next();if(c)q.push(null);else{const v=u&&typeof u.then=="function"?await u:u;if(v===null)throw k=!1,new o;if(q.push(v))continue;k=!1}}catch(u){q.destroy(u)}break}}return q}return vn=l,vn}var Sn,Wi;function Dr(){if(Wi)return Sn;Wi=1;const r=Pt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:l,Promise:g,SafeSet:w,SymbolAsyncDispose:P,SymbolAsyncIterator:O,Symbol:R}=Ie();Sn=Y,Y.ReadableState=re;const{EventEmitter:q}=Lr(),{Stream:k,prependListener:I}=ei(),{Buffer:m}=Ct(),{addAbortSignal:u}=Br(),c=_t();let v=We().debuglog("stream",A=>{v=A});const G=sa(),$=qt(),{getHighWaterMark:J,getDefaultHighWaterMark:X}=Mr(),{aggregateTwoErrors:a,codes:{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:f,ERR_OUT_OF_RANGE:h,ERR_STREAM_PUSH_AFTER_EOF:b,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:d},AbortError:N}=De(),{validateObject:p}=rr(),S=R("kPaused"),{StringDecoder:C}=na(),_=zo();l(Y.prototype,k.prototype),l(Y,k);const B=()=>{},{errorOrDestroy:E}=$,j=1,K=2,W=4,ee=8,Q=16,le=32,ue=64,z=128,V=256,oe=512,ce=1024,fe=2048,L=4096,M=8192,F=16384,ne=32768,se=65536,ie=1<<17,D=1<<18;function Z(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(x){x?this.state|=A:this.state&=~A}}}s(re.prototype,{objectMode:Z(j),ended:Z(K),endEmitted:Z(W),reading:Z(ee),constructed:Z(Q),sync:Z(le),needReadable:Z(ue),emittedReadable:Z(z),readableListening:Z(V),resumeScheduled:Z(oe),errorEmitted:Z(ce),emitClose:Z(fe),autoDestroy:Z(L),destroyed:Z(M),closed:Z(F),closeEmitted:Z(ne),multiAwaitDrain:Z(se),readingMore:Z(ie),dataEmitted:Z(D)});function re(A,x,te){typeof te!="boolean"&&(te=x instanceof ct()),this.state=fe|L|Q|le,A&&A.objectMode&&(this.state|=j),te&&A&&A.readableObjectMode&&(this.state|=j),this.highWaterMark=A?J(this,A,"readableHighWaterMark",te):X(!1),this.buffer=new G,this.length=0,this.pipes=[],this.flowing=null,this[S]=null,A&&A.emitClose===!1&&(this.state&=~fe),A&&A.autoDestroy===!1&&(this.state&=~L),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new C(A.encoding),this.encoding=A.encoding)}function Y(A){if(!(this instanceof Y))return new Y(A);const x=this instanceof ct();this._readableState=new re(A,this,x),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!x&&u(A.signal,this)),k.call(this,A),$.construct(this,()=>{this._readableState.needReadable&&Be(this,this._readableState)})}Y.prototype.destroy=$.destroy,Y.prototype._undestroy=$.undestroy,Y.prototype._destroy=function(A,x){x(A)},Y.prototype[q.captureRejectionSymbol]=function(A){this.destroy(A)},Y.prototype[P]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new N,this.destroy(A)),new g((x,te)=>c(this,ae=>ae&&ae!==A?te(ae):x(null)))},Y.prototype.push=function(A,x){return we(this,A,x,!1)},Y.prototype.unshift=function(A,x){return we(this,A,x,!0)};function we(A,x,te,ae){v("readableAddChunk",x);const de=A._readableState;let Oe;if((de.state&j)===0&&(typeof x=="string"?(te=te||de.defaultEncoding,de.encoding!==te&&(ae&&de.encoding?x=m.from(x,te).toString(de.encoding):(x=m.from(x,te),te=""))):x instanceof m?te="":k._isUint8Array(x)?(x=k._uint8ArrayToBuffer(x),te=""):x!=null&&(Oe=new y("chunk",["string","Buffer","Uint8Array"],x))),Oe)E(A,Oe);else if(x===null)de.state&=~ee,Le(A,de);else if((de.state&j)!==0||x&&x.length>0)if(ae)if((de.state&W)!==0)E(A,new d);else{if(de.destroyed||de.errored)return!1;Pe(A,de,x,!0)}else if(de.ended)E(A,new b);else{if(de.destroyed||de.errored)return!1;de.state&=~ee,de.decoder&&!te?(x=de.decoder.write(x),de.objectMode||x.length!==0?Pe(A,de,x,!1):Be(A,de)):Pe(A,de,x,!1)}else ae||(de.state&=~ee,Be(A,de));return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function Pe(A,x,te,ae){x.flowing&&x.length===0&&!x.sync&&A.listenerCount("data")>0?((x.state&se)!==0?x.awaitDrainWriters.clear():x.awaitDrainWriters=null,x.dataEmitted=!0,A.emit("data",te)):(x.length+=x.objectMode?1:te.length,ae?x.buffer.unshift(te):x.buffer.push(te),(x.state&ue)!==0&&Ye(A)),Be(A,x)}Y.prototype.isPaused=function(){const A=this._readableState;return A[S]===!0||A.flowing===!1},Y.prototype.setEncoding=function(A){const x=new C(A);this._readableState.decoder=x,this._readableState.encoding=this._readableState.decoder.encoding;const te=this._readableState.buffer;let ae="";for(const de of te)ae+=x.write(de);return te.clear(),ae!==""&&te.push(ae),this._readableState.length=ae.length,this};const ye=1073741824;function Me(A){if(A>ye)throw new h("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function xe(A,x){return A<=0||x.length===0&&x.ended?0:(x.state&j)!==0?1:n(A)?x.flowing&&x.length?x.buffer.first().length:x.length:A<=x.length?A:x.ended?x.length:0}Y.prototype.read=function(A){v("read",A),A===void 0?A=NaN:t(A)||(A=i(A,10));const x=this._readableState,te=A;if(A>x.highWaterMark&&(x.highWaterMark=Me(A)),A!==0&&(x.state&=~z),A===0&&x.needReadable&&((x.highWaterMark!==0?x.length>=x.highWaterMark:x.length>0)||x.ended))return v("read: emitReadable",x.length,x.ended),x.length===0&&x.ended?Wt(this):Ye(this),null;if(A=xe(A,x),A===0&&x.ended)return x.length===0&&Wt(this),null;let ae=(x.state&ue)!==0;if(v("need readable",ae),(x.length===0||x.length-A<x.highWaterMark)&&(ae=!0,v("length less than watermark",ae)),x.ended||x.reading||x.destroyed||x.errored||!x.constructed)ae=!1,v("reading, ended or constructing",ae);else if(ae){v("do read"),x.state|=ee|le,x.length===0&&(x.state|=ue);try{this._read(x.highWaterMark)}catch(Oe){E(this,Oe)}x.state&=~le,x.reading||(A=xe(te,x))}let de;return A>0?de=ht(A,x):de=null,de===null?(x.needReadable=x.length<=x.highWaterMark,A=0):(x.length-=A,x.multiAwaitDrain?x.awaitDrainWriters.clear():x.awaitDrainWriters=null),x.length===0&&(x.ended||(x.needReadable=!0),te!==A&&x.ended&&Wt(this)),de!==null&&!x.errorEmitted&&!x.closeEmitted&&(x.dataEmitted=!0,this.emit("data",de)),de};function Le(A,x){if(v("onEofChunk"),!x.ended){if(x.decoder){const te=x.decoder.end();te&&te.length&&(x.buffer.push(te),x.length+=x.objectMode?1:te.length)}x.ended=!0,x.sync?Ye(A):(x.needReadable=!1,x.emittedReadable=!0,mt(A))}}function Ye(A){const x=A._readableState;v("emitReadable",x.needReadable,x.emittedReadable),x.needReadable=!1,x.emittedReadable||(v("emitReadable",x.flowing),x.emittedReadable=!0,r.nextTick(mt,A))}function mt(A){const x=A._readableState;v("emitReadable_",x.destroyed,x.length,x.ended),!x.destroyed&&!x.errored&&(x.length||x.ended)&&(A.emit("readable"),x.emittedReadable=!1),x.needReadable=!x.flowing&&!x.ended&&x.length<=x.highWaterMark,jt(A)}function Be(A,x){!x.readingMore&&x.constructed&&(x.readingMore=!0,r.nextTick(sr,A,x))}function sr(A,x){for(;!x.reading&&!x.ended&&(x.length<x.highWaterMark||x.flowing&&x.length===0);){const te=x.length;if(v("maybeReadMore read 0"),A.read(0),te===x.length)break}x.readingMore=!1}Y.prototype._read=function(A){throw new f("_read()")},Y.prototype.pipe=function(A,x){const te=this,ae=this._readableState;ae.pipes.length===1&&(ae.multiAwaitDrain||(ae.multiAwaitDrain=!0,ae.awaitDrainWriters=new w(ae.awaitDrainWriters?[ae.awaitDrainWriters]:[]))),ae.pipes.push(A),v("pipe count=%d opts=%j",ae.pipes.length,x);const Oe=(!x||x.end!==!1)&&A!==r.stdout&&A!==r.stderr?cr:Et;ae.endEmitted?r.nextTick(Oe):te.once("end",Oe),A.on("unpipe",ke);function ke(ot,Je){v("onunpipe"),ot===te&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,Vr())}function cr(){v("onend"),A.end()}let Ue,dr=!1;function Vr(){v("cleanup"),A.removeListener("close",et),A.removeListener("finish",Ht),Ue&&A.removeListener("drain",Ue),A.removeListener("error",$t),A.removeListener("unpipe",ke),te.removeListener("end",cr),te.removeListener("end",Et),te.removeListener("data",gr),dr=!0,Ue&&ae.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&Ue()}function hr(){dr||(ae.pipes.length===1&&ae.pipes[0]===A?(v("false write response, pause",0),ae.awaitDrainWriters=A,ae.multiAwaitDrain=!1):ae.pipes.length>1&&ae.pipes.includes(A)&&(v("false write response, pause",ae.awaitDrainWriters.size),ae.awaitDrainWriters.add(A)),te.pause()),Ue||(Ue=Hr(te,A),A.on("drain",Ue))}te.on("data",gr);function gr(ot){v("ondata");const Je=A.write(ot);v("dest.write",Je),Je===!1&&hr()}function $t(ot){if(v("onerror",ot),Et(),A.removeListener("error",$t),A.listenerCount("error")===0){const Je=A._writableState||A._readableState;Je&&!Je.errorEmitted?E(A,ot):A.emit("error",ot)}}I(A,"error",$t);function et(){A.removeListener("finish",Ht),Et()}A.once("close",et);function Ht(){v("onfinish"),A.removeListener("close",et),Et()}A.once("finish",Ht);function Et(){v("unpipe"),te.unpipe(A)}return A.emit("pipe",te),A.writableNeedDrain===!0?hr():ae.flowing||(v("pipe resume"),te.resume()),A};function Hr(A,x){return function(){const ae=A._readableState;ae.awaitDrainWriters===x?(v("pipeOnDrain",1),ae.awaitDrainWriters=null):ae.multiAwaitDrain&&(v("pipeOnDrain",ae.awaitDrainWriters.size),ae.awaitDrainWriters.delete(x)),(!ae.awaitDrainWriters||ae.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}Y.prototype.unpipe=function(A){const x=this._readableState,te={hasUnpiped:!1};if(x.pipes.length===0)return this;if(!A){const de=x.pipes;x.pipes=[],this.pause();for(let Oe=0;Oe<de.length;Oe++)de[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const ae=e(x.pipes,A);return ae===-1?this:(x.pipes.splice(ae,1),x.pipes.length===0&&this.pause(),A.emit("unpipe",this,te),this)},Y.prototype.on=function(A,x){const te=k.prototype.on.call(this,A,x),ae=this._readableState;return A==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):A==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,v("on readable",ae.length,ae.reading),ae.length?Ye(this):ae.reading||r.nextTick(nt,this)),te},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(A,x){const te=k.prototype.removeListener.call(this,A,x);return A==="readable"&&r.nextTick(ar,this),te},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(A){const x=k.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&r.nextTick(ar,this),x};function ar(A){const x=A._readableState;x.readableListening=A.listenerCount("readable")>0,x.resumeScheduled&&x[S]===!1?x.flowing=!0:A.listenerCount("data")>0?A.resume():x.readableListening||(x.flowing=null)}function nt(A){v("readable nexttick read 0"),A.read(0)}Y.prototype.resume=function(){const A=this._readableState;return A.flowing||(v("resume"),A.flowing=!A.readableListening,Lt(this,A)),A[S]=!1,this};function Lt(A,x){x.resumeScheduled||(x.resumeScheduled=!0,r.nextTick(zr,A,x))}function zr(A,x){v("resume",x.reading),x.reading||A.read(0),x.resumeScheduled=!1,A.emit("resume"),jt(A),x.flowing&&!x.reading&&A.read(0)}Y.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[S]=!0,this};function jt(A){const x=A._readableState;for(v("flow",x.flowing);x.flowing&&A.read()!==null;);}Y.prototype.wrap=function(A){let x=!1;A.on("data",ae=>{!this.push(ae)&&A.pause&&(x=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",ae=>{E(this,ae)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{x&&A.resume&&(x=!1,A.resume())};const te=o(A);for(let ae=1;ae<te.length;ae++){const de=te[ae];this[de]===void 0&&typeof A[de]=="function"&&(this[de]=A[de].bind(A))}return this},Y.prototype[O]=function(){return lr(this)},Y.prototype.iterator=function(A){return A!==void 0&&p(A,"options"),lr(this,A)};function lr(A,x){typeof A.read!="function"&&(A=Y.wrap(A,{objectMode:!0}));const te=ur(A,x);return te.stream=A,te}async function*ur(A,x){let te=B;function ae(ke){this===A?(te(),te=B):te=ke}A.on("readable",ae);let de;const Oe=c(A,{writable:!1},ke=>{de=ke?a(de,ke):null,te(),te=B});try{for(;;){const ke=A.destroyed?null:A.read();if(ke!==null)yield ke;else{if(de)throw de;if(de===null)return;await new g(ae)}}}catch(ke){throw de=a(de,ke),de}finally{(de||x?.destroyOnReturn!==!1)&&(de===void 0||A._readableState.autoDestroy)?$.destroyer(A,null):(A.off("readable",ae),Oe())}}s(Y.prototype,{readable:{__proto__:null,get(){const A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[S]!==!1},set(A){this[S]=!!A}}}),Y._fromList=ht;function ht(A,x){if(x.length===0)return null;let te;return x.objectMode?te=x.buffer.shift():!A||A>=x.length?(x.decoder?te=x.buffer.join(""):x.buffer.length===1?te=x.buffer.first():te=x.buffer.concat(x.length),x.buffer.clear()):te=x.buffer.consume(A,x.decoder),te}function Wt(A){const x=A._readableState;v("endReadable",x.endEmitted),x.endEmitted||(x.ended=!0,r.nextTick(it,x,A))}function it(A,x){if(v("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,x.emit("end"),x.writable&&x.allowHalfOpen===!1)r.nextTick(Gr,x);else if(A.autoDestroy){const te=x._writableState;(!te||te.autoDestroy&&(te.finished||te.writable===!1))&&x.destroy()}}}function Gr(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}Y.from=function(A,x){return _(Y,A,x)};let Ft;function fr(){return Ft===void 0&&(Ft={}),Ft}return Y.fromWeb=function(A,x){return fr().newStreamReadableFromReadableStream(A,x)},Y.toWeb=function(A,x){return fr().newReadableStreamFromStreamReadable(A,x)},Y.wrap=function(A,x){var te,ae;return new Y({objectMode:(te=(ae=A.readableObjectMode)!==null&&ae!==void 0?ae:A.objectMode)!==null&&te!==void 0?te:!0,...x,destroy(de,Oe){$.destroyer(A,de),Oe(de)}}).wrap(A)},Sn}var An,Fi;function ti(){if(Fi)return An;Fi=1;const r=Pt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:l,Symbol:g,SymbolHasInstance:w}=Ie();An=p,p.WritableState=d;const{EventEmitter:P}=Lr(),O=ei().Stream,{Buffer:R}=Ct(),q=qt(),{addAbortSignal:k}=Br(),{getHighWaterMark:I,getDefaultHighWaterMark:m}=Mr(),{ERR_INVALID_ARG_TYPE:u,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:G,ERR_STREAM_DESTROYED:$,ERR_STREAM_ALREADY_FINISHED:J,ERR_STREAM_NULL_VALUES:X,ERR_STREAM_WRITE_AFTER_END:a,ERR_UNKNOWN_ENCODING:y}=De().codes,{errorOrDestroy:f}=q;o(p.prototype,O.prototype),o(p,O);function h(){}const b=g("kOnFinished");function d(L,M,F){typeof F!="boolean"&&(F=M instanceof ct()),this.objectMode=!!(L&&L.objectMode),F&&(this.objectMode=this.objectMode||!!(L&&L.writableObjectMode)),this.highWaterMark=L?I(this,L,"writableHighWaterMark",F):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(L&&L.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=L&&L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=E.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,N(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!L||L.emitClose!==!1,this.autoDestroy=!L||L.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[b]=[]}function N(L){L.buffered=[],L.bufferedIndex=0,L.allBuffers=!0,L.allNoop=!0}d.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(d.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function p(L){const M=this instanceof ct();if(!M&&!n(p,this))return new p(L);this._writableState=new d(L,this,M),L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final),typeof L.construct=="function"&&(this._construct=L.construct),L.signal&&k(L.signal,this)),O.call(this,L),q.construct(this,()=>{const F=this._writableState;F.writing||ee(this,F),z(this,F)})}i(p,w,{__proto__:null,value:function(L){return n(this,L)?!0:this!==p?!1:L&&L._writableState instanceof d}}),p.prototype.pipe=function(){f(this,new G)};function S(L,M,F,ne){const se=L._writableState;if(typeof F=="function")ne=F,F=se.defaultEncoding;else{if(!F)F=se.defaultEncoding;else if(F!=="buffer"&&!R.isEncoding(F))throw new y(F);typeof ne!="function"&&(ne=h)}if(M===null)throw new X;if(!se.objectMode)if(typeof M=="string")se.decodeStrings!==!1&&(M=R.from(M,F),F="buffer");else if(M instanceof R)F="buffer";else if(O._isUint8Array(M))M=O._uint8ArrayToBuffer(M),F="buffer";else throw new u("chunk",["string","Buffer","Uint8Array"],M);let ie;return se.ending?ie=new a:se.destroyed&&(ie=new $("write")),ie?(r.nextTick(ne,ie),f(L,ie,!0),ie):(se.pendingcb++,C(L,se,M,F,ne))}p.prototype.write=function(L,M,F){return S(this,L,M,F)===!0},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){const L=this._writableState;L.corked&&(L.corked--,L.writing||ee(this,L))},p.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=l(M)),!R.isEncoding(M))throw new y(M);return this._writableState.defaultEncoding=M,this};function C(L,M,F,ne,se){const ie=M.objectMode?1:F.length;M.length+=ie;const D=M.length<M.highWaterMark;return D||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:F,encoding:ne,callback:se}),M.allBuffers&&ne!=="buffer"&&(M.allBuffers=!1),M.allNoop&&se!==h&&(M.allNoop=!1)):(M.writelen=ie,M.writecb=se,M.writing=!0,M.sync=!0,L._write(F,ne,M.onwrite),M.sync=!1),D&&!M.errored&&!M.destroyed}function _(L,M,F,ne,se,ie,D){M.writelen=ne,M.writecb=D,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new $("write")):F?L._writev(se,M.onwrite):L._write(se,ie,M.onwrite),M.sync=!1}function B(L,M,F,ne){--M.pendingcb,ne(F),W(M),f(L,F)}function E(L,M){const F=L._writableState,ne=F.sync,se=F.writecb;if(typeof se!="function"){f(L,new v);return}F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0,M?(M.stack,F.errored||(F.errored=M),L._readableState&&!L._readableState.errored&&(L._readableState.errored=M),ne?r.nextTick(B,L,F,M,se):B(L,F,M,se)):(F.buffered.length>F.bufferedIndex&&ee(L,F),ne?F.afterWriteTickInfo!==null&&F.afterWriteTickInfo.cb===se?F.afterWriteTickInfo.count++:(F.afterWriteTickInfo={count:1,cb:se,stream:L,state:F},r.nextTick(j,F.afterWriteTickInfo)):K(L,F,1,se))}function j({stream:L,state:M,count:F,cb:ne}){return M.afterWriteTickInfo=null,K(L,M,F,ne)}function K(L,M,F,ne){for(!M.ending&&!L.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,L.emit("drain"));F-- >0;)M.pendingcb--,ne();M.destroyed&&W(M),z(L,M)}function W(L){if(L.writing)return;for(let se=L.bufferedIndex;se<L.buffered.length;++se){var M;const{chunk:ie,callback:D}=L.buffered[se],Z=L.objectMode?1:ie.length;L.length-=Z,D((M=L.errored)!==null&&M!==void 0?M:new $("write"))}const F=L[b].splice(0);for(let se=0;se<F.length;se++){var ne;F[se]((ne=L.errored)!==null&&ne!==void 0?ne:new $("end"))}N(L)}function ee(L,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;const{buffered:F,bufferedIndex:ne,objectMode:se}=M,ie=F.length-ne;if(!ie)return;let D=ne;if(M.bufferProcessing=!0,ie>1&&L._writev){M.pendingcb-=ie-1;const Z=M.allNoop?h:Y=>{for(let we=D;we<F.length;++we)F[we].callback(Y)},re=M.allNoop&&D===0?F:e(F,D);re.allBuffers=M.allBuffers,_(L,M,!0,M.length,re,"",Z),N(M)}else{do{const{chunk:Z,encoding:re,callback:Y}=F[D];F[D++]=null;const we=se?1:Z.length;_(L,M,!1,we,Z,re,Y)}while(D<F.length&&!M.writing);D===F.length?N(M):D>256?(F.splice(0,D),M.bufferedIndex=0):M.bufferedIndex=D}M.bufferProcessing=!1}p.prototype._write=function(L,M,F){if(this._writev)this._writev([{chunk:L,encoding:M}],F);else throw new c("_write()")},p.prototype._writev=null,p.prototype.end=function(L,M,F){const ne=this._writableState;typeof L=="function"?(F=L,L=null,M=null):typeof M=="function"&&(F=M,M=null);let se;if(L!=null){const ie=S(this,L,M);ie instanceof t&&(se=ie)}return ne.corked&&(ne.corked=1,this.uncork()),se||(!ne.errored&&!ne.ending?(ne.ending=!0,z(this,ne,!0),ne.ended=!0):ne.finished?se=new J("end"):ne.destroyed&&(se=new $("end"))),typeof F=="function"&&(se||ne.finished?r.nextTick(F,se):ne[b].push(F)),this};function Q(L){return L.ending&&!L.destroyed&&L.constructed&&L.length===0&&!L.errored&&L.buffered.length===0&&!L.finished&&!L.writing&&!L.errorEmitted&&!L.closeEmitted}function le(L,M){let F=!1;function ne(se){if(F){f(L,se??v());return}if(F=!0,M.pendingcb--,se){const ie=M[b].splice(0);for(let D=0;D<ie.length;D++)ie[D](se);f(L,se,M.sync)}else Q(M)&&(M.prefinished=!0,L.emit("prefinish"),M.pendingcb++,r.nextTick(V,L,M))}M.sync=!0,M.pendingcb++;try{L._final(ne)}catch(se){ne(se)}M.sync=!1}function ue(L,M){!M.prefinished&&!M.finalCalled&&(typeof L._final=="function"&&!M.destroyed?(M.finalCalled=!0,le(L,M)):(M.prefinished=!0,L.emit("prefinish")))}function z(L,M,F){Q(M)&&(ue(L,M),M.pendingcb===0&&(F?(M.pendingcb++,r.nextTick((ne,se)=>{Q(se)?V(ne,se):se.pendingcb--},L,M)):Q(M)&&(M.pendingcb++,V(L,M))))}function V(L,M){M.pendingcb--,M.finished=!0;const F=M[b].splice(0);for(let ne=0;ne<F.length;ne++)F[ne]();if(L.emit("finish"),M.autoDestroy){const ne=L._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&L.destroy()}}s(p.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(L){this._writableState&&(this._writableState.destroyed=L)}},writable:{__proto__:null,get(){const L=this._writableState;return!!L&&L.writable!==!1&&!L.destroyed&&!L.errored&&!L.ending&&!L.ended},set(L){this._writableState&&(this._writableState.writable=!!L)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const L=this._writableState;return L?!L.destroyed&&!L.ending&&L.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=q.destroy;p.prototype.destroy=function(L,M){const F=this._writableState;return!F.destroyed&&(F.bufferedIndex<F.buffered.length||F[b].length)&&r.nextTick(W,F),oe.call(this,L,M),this},p.prototype._undestroy=q.undestroy,p.prototype._destroy=function(L,M){M(L)},p.prototype[P.captureRejectionSymbol]=function(L){this.destroy(L)};let ce;function fe(){return ce===void 0&&(ce={}),ce}return p.fromWeb=function(L,M){return fe().newStreamWritableFromWritableStream(L,M)},p.toWeb=function(L){return fe().newWritableStreamFromStreamWritable(L)},An}var Rn,$i;function aa(){if($i)return Rn;$i=1;const r=Pt(),e=Ct(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:l,isDuplexNodeStream:g,isReadableStream:w,isWritableStream:P}=dt(),O=_t(),{AbortError:R,codes:{ERR_INVALID_ARG_TYPE:q,ERR_INVALID_RETURN_VALUE:k}}=De(),{destroyer:I}=qt(),m=ct(),u=Dr(),c=ti(),{createDeferredPromise:v}=We(),G=zo(),$=globalThis.Blob||e.Blob,J=typeof $<"u"?function(d){return d instanceof $}:function(d){return!1},X=globalThis.AbortController||er().AbortController,{FunctionPrototypeCall:a}=Ie();class y extends m{constructor(d){super(d),d?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Rn=function b(d,N){if(g(d))return d;if(o(d))return h({readable:d});if(l(d))return h({writable:d});if(s(d))return h({writable:!1,readable:!1});if(w(d))return h({readable:u.fromWeb(d)});if(P(d))return h({writable:c.fromWeb(d)});if(typeof d=="function"){const{value:S,write:C,final:_,destroy:B}=f(d);if(i(S))return G(y,S,{objectMode:!0,write:C,final:_,destroy:B});const E=S?.then;if(typeof E=="function"){let j;const K=a(E,S,W=>{if(W!=null)throw new k("nully","body",W)},W=>{I(j,W)});return j=new y({objectMode:!0,readable:!1,write:C,final(W){_(async()=>{try{await K,r.nextTick(W,null)}catch(ee){r.nextTick(W,ee)}})},destroy:B})}throw new k("Iterable, AsyncIterable or AsyncFunction",N,S)}if(J(d))return b(d.arrayBuffer());if(i(d))return G(y,d,{objectMode:!0,writable:!1});if(w(d?.readable)&&P(d?.writable))return y.fromWeb(d);if(typeof d?.writable=="object"||typeof d?.readable=="object"){const S=d!=null&&d.readable?o(d?.readable)?d?.readable:b(d.readable):void 0,C=d!=null&&d.writable?l(d?.writable)?d?.writable:b(d.writable):void 0;return h({readable:S,writable:C})}const p=d?.then;if(typeof p=="function"){let S;return a(p,d,C=>{C!=null&&S.push(C),S.push(null)},C=>{I(S,C)}),S=new y({objectMode:!0,writable:!1,read(){}})}throw new q(N,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],d)};function f(b){let{promise:d,resolve:N}=v();const p=new X,S=p.signal;return{value:b(async function*(){for(;;){const _=d;d=null;const{chunk:B,done:E,cb:j}=await _;if(r.nextTick(j),E)return;if(S.aborted)throw new R(void 0,{cause:S.reason});({promise:d,resolve:N}=v()),yield B}}(),{signal:S}),write(_,B,E){const j=N;N=null,j({chunk:_,done:!1,cb:E})},final(_){const B=N;N=null,B({done:!0,cb:_})},destroy(_,B){p.abort(),B(_)}}}function h(b){const d=b.readable&&typeof b.readable.read!="function"?u.wrap(b.readable):b.readable,N=b.writable;let p=!!t(d),S=!!n(N),C,_,B,E,j;function K(W){const ee=E;E=null,ee?ee(W):W&&j.destroy(W)}return j=new y({readableObjectMode:!!(d!=null&&d.readableObjectMode),writableObjectMode:!!(N!=null&&N.writableObjectMode),readable:p,writable:S}),S&&(O(N,W=>{S=!1,W&&I(d,W),K(W)}),j._write=function(W,ee,Q){N.write(W,ee)?Q():C=Q},j._final=function(W){N.end(),_=W},N.on("drain",function(){if(C){const W=C;C=null,W()}}),N.on("finish",function(){if(_){const W=_;_=null,W()}})),p&&(O(d,W=>{p=!1,W&&I(d,W),K(W)}),d.on("readable",function(){if(B){const W=B;B=null,W()}}),d.on("end",function(){j.push(null)}),j._read=function(){for(;;){const W=d.read();if(W===null){B=j._read;return}if(!j.push(W))return}}),j._destroy=function(W,ee){!W&&E!==null&&(W=new R),B=null,C=null,_=null,E===null?ee(W):(E=ee,I(N,W),I(d,W))},j}return Rn}var In,Hi;function ct(){if(Hi)return In;Hi=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Ie();In=o;const i=Dr(),s=ti();n(o.prototype,i.prototype),n(o,i);{const P=t(s.prototype);for(let O=0;O<P.length;O++){const R=P[O];o.prototype[R]||(o.prototype[R]=s.prototype[R])}}function o(P){if(!(this instanceof o))return new o(P);i.call(this,P),s.call(this,P),P?(this.allowHalfOpen=P.allowHalfOpen!==!1,P.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),P.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(o.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(P){this._readableState&&this._writableState&&(this._readableState.destroyed=P,this._writableState.destroyed=P)}}});let l;function g(){return l===void 0&&(l={}),l}o.fromWeb=function(P,O){return g().newStreamDuplexFromReadableWritablePair(P,O)},o.toWeb=function(P){return g().newReadableWritablePairFromDuplex(P)};let w;return o.from=function(P){return w||(w=aa()),w(P,"body")},In}var Tn,zi;function Go(){if(zi)return Tn;zi=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Ie();Tn=o;const{ERR_METHOD_NOT_IMPLEMENTED:t}=De().codes,n=ct(),{getHighWaterMark:i}=Mr();r(o.prototype,n.prototype),r(o,n);const s=e("kCallback");function o(w){if(!(this instanceof o))return new o(w);const P=w?i(this,w,"readableHighWaterMark",!0):null;P===0&&(w={...w,highWaterMark:null,readableHighWaterMark:P,writableHighWaterMark:w.writableHighWaterMark||0}),n.call(this,w),this._readableState.sync=!1,this[s]=null,w&&(typeof w.transform=="function"&&(this._transform=w.transform),typeof w.flush=="function"&&(this._flush=w.flush)),this.on("prefinish",g)}function l(w){typeof this._flush=="function"&&!this.destroyed?this._flush((P,O)=>{if(P){w?w(P):this.destroy(P);return}O!=null&&this.push(O),this.push(null),w&&w()}):(this.push(null),w&&w())}function g(){this._final!==l&&l.call(this)}return o.prototype._final=l,o.prototype._transform=function(w,P,O){throw new t("_transform()")},o.prototype._write=function(w,P,O){const R=this._readableState,q=this._writableState,k=R.length;this._transform(w,P,(I,m)=>{if(I){O(I);return}m!=null&&this.push(m),q.ended||k===R.length||R.length<R.highWaterMark?O():this[s]=O})},o.prototype._read=function(){if(this[s]){const w=this[s];this[s]=null,w()}},Tn}var xn,Gi;function Vo(){if(Gi)return xn;Gi=1;const{ObjectSetPrototypeOf:r}=Ie();xn=t;const e=Go();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,s){s(null,n)},xn}var On,Vi;function ri(){if(Vi)return On;Vi=1;const r=Pt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=Ie(),s=_t(),{once:o}=We(),l=qt(),g=ct(),{aggregateTwoErrors:w,codes:{ERR_INVALID_ARG_TYPE:P,ERR_INVALID_RETURN_VALUE:O,ERR_MISSING_ARGS:R,ERR_STREAM_DESTROYED:q,ERR_STREAM_PREMATURE_CLOSE:k},AbortError:I}=De(),{validateFunction:m,validateAbortSignal:u}=rr(),{isIterable:c,isReadable:v,isReadableNodeStream:G,isNodeStream:$,isTransformStream:J,isWebStream:X,isReadableStream:a,isReadableFinished:y}=dt(),f=globalThis.AbortController||er().AbortController;let h,b,d;function N(W,ee,Q){let le=!1;W.on("close",()=>{le=!0});const ue=s(W,{readable:ee,writable:Q},z=>{le=!z});return{destroy:z=>{le||(le=!0,l.destroyer(W,z||new q("pipe")))},cleanup:ue}}function p(W){return m(W[W.length-1],"streams[stream.length - 1]"),W.pop()}function S(W){if(c(W))return W;if(G(W))return C(W);throw new P("val",["Readable","Iterable","AsyncIterable"],W)}async function*C(W){b||(b=Dr()),yield*b.prototype[n].call(W)}async function _(W,ee,Q,{end:le}){let ue,z=null;const V=fe=>{if(fe&&(ue=fe),z){const L=z;z=null,L()}},oe=()=>new t((fe,L)=>{ue?L(ue):z=()=>{ue?L(ue):fe()}});ee.on("drain",V);const ce=s(ee,{readable:!1},V);try{ee.writableNeedDrain&&await oe();for await(const fe of W)ee.write(fe)||await oe();le&&(ee.end(),await oe()),Q()}catch(fe){Q(ue!==fe?w(ue,fe):fe)}finally{ce(),ee.off("drain",V)}}async function B(W,ee,Q,{end:le}){J(ee)&&(ee=ee.writable);const ue=ee.getWriter();try{for await(const z of W)await ue.ready,ue.write(z).catch(()=>{});await ue.ready,le&&await ue.close(),Q()}catch(z){try{await ue.abort(z),Q(z)}catch(V){Q(V)}}}function E(...W){return j(W,o(p(W)))}function j(W,ee,Q){if(W.length===1&&e(W[0])&&(W=W[0]),W.length<2)throw new R("streams");const le=new f,ue=le.signal,z=Q?.signal,V=[];u(z,"options.signal");function oe(){se(new I)}d=d||We().addAbortListener;let ce;z&&(ce=d(z,oe));let fe,L;const M=[];let F=0;function ne(re){se(re,--F===0)}function se(re,Y){var we;if(re&&(!fe||fe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(fe=re),!(!fe&&!Y)){for(;M.length;)M.shift()(fe);(we=ce)===null||we===void 0||we[i](),le.abort(),Y&&(fe||V.forEach(Pe=>Pe()),r.nextTick(ee,fe,L))}}let ie;for(let re=0;re<W.length;re++){const Y=W[re],we=re<W.length-1,Pe=re>0,ye=we||Q?.end!==!1,Me=re===W.length-1;if($(Y)){let xe=function(Le){Le&&Le.name!=="AbortError"&&Le.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ne(Le)};if(ye){const{destroy:Le,cleanup:Ye}=N(Y,we,Pe);M.push(Le),v(Y)&&Me&&V.push(Ye)}Y.on("error",xe),v(Y)&&Me&&V.push(()=>{Y.removeListener("error",xe)})}if(re===0)if(typeof Y=="function"){if(ie=Y({signal:ue}),!c(ie))throw new O("Iterable, AsyncIterable or Stream","source",ie)}else c(Y)||G(Y)||J(Y)?ie=Y:ie=g.from(Y);else if(typeof Y=="function"){if(J(ie)){var D;ie=S((D=ie)===null||D===void 0?void 0:D.readable)}else ie=S(ie);if(ie=Y(ie,{signal:ue}),we){if(!c(ie,!0))throw new O("AsyncIterable",`transform[${re-1}]`,ie)}else{var Z;h||(h=Vo());const xe=new h({objectMode:!0}),Le=(Z=ie)===null||Z===void 0?void 0:Z.then;if(typeof Le=="function")F++,Le.call(ie,Be=>{L=Be,Be!=null&&xe.write(Be),ye&&xe.end(),r.nextTick(ne)},Be=>{xe.destroy(Be),r.nextTick(ne,Be)});else if(c(ie,!0))F++,_(ie,xe,ne,{end:ye});else if(a(ie)||J(ie)){const Be=ie.readable||ie;F++,_(Be,xe,ne,{end:ye})}else throw new O("AsyncIterable or Promise","destination",ie);ie=xe;const{destroy:Ye,cleanup:mt}=N(ie,!1,!0);M.push(Ye),Me&&V.push(mt)}}else if($(Y)){if(G(ie)){F+=2;const xe=K(ie,Y,ne,{end:ye});v(Y)&&Me&&V.push(xe)}else if(J(ie)||a(ie)){const xe=ie.readable||ie;F++,_(xe,Y,ne,{end:ye})}else if(c(ie))F++,_(ie,Y,ne,{end:ye});else throw new P("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Y}else if(X(Y)){if(G(ie))F++,B(S(ie),Y,ne,{end:ye});else if(a(ie)||c(ie))F++,B(ie,Y,ne,{end:ye});else if(J(ie))F++,B(ie.readable,Y,ne,{end:ye});else throw new P("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Y}else ie=g.from(Y)}return(ue!=null&&ue.aborted||z!=null&&z.aborted)&&r.nextTick(oe),ie}function K(W,ee,Q,{end:le}){let ue=!1;if(ee.on("close",()=>{ue||Q(new k)}),W.pipe(ee,{end:!1}),le){let z=function(){ue=!0,ee.end()};y(W)?r.nextTick(z):W.once("end",z)}else Q();return s(W,{readable:!0,writable:!1},z=>{const V=W._readableState;z&&z.code==="ERR_STREAM_PREMATURE_CLOSE"&&V&&V.ended&&!V.errored&&!V.errorEmitted?W.once("end",Q).once("error",Q):Q(z)}),s(ee,{readable:!1,writable:!0},Q)}return On={pipelineImpl:j,pipeline:E},On}var Nn,Ki;function Ko(){if(Ki)return Nn;Ki=1;const{pipeline:r}=ri(),e=ct(),{destroyer:t}=qt(),{isNodeStream:n,isReadable:i,isWritable:s,isWebStream:o,isTransformStream:l,isWritableStream:g,isReadableStream:w}=dt(),{AbortError:P,codes:{ERR_INVALID_ARG_VALUE:O,ERR_MISSING_ARGS:R}}=De(),q=_t();return Nn=function(...I){if(I.length===0)throw new R("streams");if(I.length===1)return e.from(I[0]);const m=[...I];if(typeof I[0]=="function"&&(I[0]=e.from(I[0])),typeof I[I.length-1]=="function"){const h=I.length-1;I[h]=e.from(I[h])}for(let h=0;h<I.length;++h)if(!(!n(I[h])&&!o(I[h]))){if(h<I.length-1&&!(i(I[h])||w(I[h])||l(I[h])))throw new O(`streams[${h}]`,m[h],"must be readable");if(h>0&&!(s(I[h])||g(I[h])||l(I[h])))throw new O(`streams[${h}]`,m[h],"must be writable")}let u,c,v,G,$;function J(h){const b=G;G=null,b?b(h):h?$.destroy(h):!f&&!y&&$.destroy()}const X=I[0],a=r(I,J),y=!!(s(X)||g(X)||l(X)),f=!!(i(a)||w(a)||l(a));if($=new e({writableObjectMode:!!(X!=null&&X.writableObjectMode),readableObjectMode:!!(a!=null&&a.readableObjectMode),writable:y,readable:f}),y){if(n(X))$._write=function(b,d,N){X.write(b,d)?N():u=N},$._final=function(b){X.end(),c=b},X.on("drain",function(){if(u){const b=u;u=null,b()}});else if(o(X)){const d=(l(X)?X.writable:X).getWriter();$._write=async function(N,p,S){try{await d.ready,d.write(N).catch(()=>{}),S()}catch(C){S(C)}},$._final=async function(N){try{await d.ready,d.close().catch(()=>{}),c=N}catch(p){N(p)}}}const h=l(a)?a.readable:a;q(h,()=>{if(c){const b=c;c=null,b()}})}if(f){if(n(a))a.on("readable",function(){if(v){const h=v;v=null,h()}}),a.on("end",function(){$.push(null)}),$._read=function(){for(;;){const h=a.read();if(h===null){v=$._read;return}if(!$.push(h))return}};else if(o(a)){const b=(l(a)?a.readable:a).getReader();$._read=async function(){for(;;)try{const{value:d,done:N}=await b.read();if(!$.push(d))return;if(N){$.push(null);return}}catch{return}}}}return $._destroy=function(h,b){!h&&G!==null&&(h=new P),v=null,u=null,c=null,G===null?b(h):(G=b,n(a)&&t(a,h))},$},Nn}var Yi;function la(){if(Yi)return Er;Yi=1;const r=globalThis.AbortController||er().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:s}=De(),{validateAbortSignal:o,validateInteger:l,validateObject:g}=rr(),w=Ie().Symbol("kWeak"),P=Ie().Symbol("kResistStopPropagation"),{finished:O}=_t(),R=Ko(),{addAbortSignalNoValidate:q}=Br(),{isWritable:k,isNodeStream:I}=dt(),{deprecate:m}=We(),{ArrayPrototypePush:u,Boolean:c,MathFloor:v,Number:G,NumberIsNaN:$,Promise:J,PromiseReject:X,PromiseResolve:a,PromisePrototypeThen:y,Symbol:f}=Ie(),h=f("kEmpty"),b=f("kEof");function d(z,V){if(V!=null&&g(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),I(z)&&!k(z))throw new e("stream",z,"must be writable");const oe=R(this,z);return V!=null&&V.signal&&q(V.signal,oe),oe}function N(z,V){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);V!=null&&g(V,"options"),V?.signal!=null&&o(V.signal,"options.signal");let oe=1;V?.concurrency!=null&&(oe=v(V.concurrency));let ce=oe-1;return V?.highWaterMark!=null&&(ce=v(V.highWaterMark)),l(oe,"options.concurrency",1),l(ce,"options.highWaterMark",0),ce+=oe,async function*(){const L=We().AbortSignalAny([V?.signal].filter(c)),M=this,F=[],ne={signal:L};let se,ie,D=!1,Z=0;function re(){D=!0,Y()}function Y(){Z-=1,we()}function we(){ie&&!D&&Z<oe&&F.length<ce&&(ie(),ie=null)}async function Pe(){try{for await(let ye of M){if(D)return;if(L.aborted)throw new s;try{if(ye=z(ye,ne),ye===h)continue;ye=a(ye)}catch(Me){ye=X(Me)}Z+=1,y(ye,Y,re),F.push(ye),se&&(se(),se=null),!D&&(F.length>=ce||Z>=oe)&&await new J(Me=>{ie=Me})}F.push(b)}catch(ye){const Me=X(ye);y(Me,Y,re),F.push(Me)}finally{D=!0,se&&(se(),se=null)}}Pe();try{for(;;){for(;F.length>0;){const ye=await F[0];if(ye===b)return;if(L.aborted)throw new s;ye!==h&&(yield ye),F.shift(),we()}await new J(ye=>{se=ye})}}finally{D=!0,ie&&(ie(),ie=null)}}.call(this)}function p(z=void 0){return z!=null&&g(z,"options"),z?.signal!=null&&o(z.signal,"options.signal"),async function*(){let oe=0;for await(const fe of this){var ce;if(z!=null&&(ce=z.signal)!==null&&ce!==void 0&&ce.aborted)throw new s({cause:z.signal.reason});yield[oe++,fe]}}.call(this)}async function S(z,V=void 0){for await(const oe of E.call(this,z,V))return!0;return!1}async function C(z,V=void 0){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);return!await S.call(this,async(...oe)=>!await z(...oe),V)}async function _(z,V){for await(const oe of E.call(this,z,V))return oe}async function B(z,V){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);async function oe(ce,fe){return await z(ce,fe),h}for await(const ce of N.call(this,oe,V));}function E(z,V){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);async function oe(ce,fe){return await z(ce,fe)?ce:h}return N.call(this,oe,V)}class j extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function K(z,V,oe){var ce;if(typeof z!="function")throw new t("reducer",["Function","AsyncFunction"],z);oe!=null&&g(oe,"options"),oe?.signal!=null&&o(oe.signal,"options.signal");let fe=arguments.length>1;if(oe!=null&&(ce=oe.signal)!==null&&ce!==void 0&&ce.aborted){const se=new s(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await O(this.destroy(se)),se}const L=new r,M=L.signal;if(oe!=null&&oe.signal){const se={once:!0,[w]:this,[P]:!0};oe.signal.addEventListener("abort",()=>L.abort(),se)}let F=!1;try{for await(const se of this){var ne;if(F=!0,oe!=null&&(ne=oe.signal)!==null&&ne!==void 0&&ne.aborted)throw new s;fe?V=await z(V,se,{signal:M}):(V=se,fe=!0)}if(!F&&!fe)throw new j}finally{L.abort()}return V}async function W(z){z!=null&&g(z,"options"),z?.signal!=null&&o(z.signal,"options.signal");const V=[];for await(const ce of this){var oe;if(z!=null&&(oe=z.signal)!==null&&oe!==void 0&&oe.aborted)throw new s(void 0,{cause:z.signal.reason});u(V,ce)}return V}function ee(z,V){const oe=N.call(this,z,V);return async function*(){for await(const fe of oe)yield*fe}.call(this)}function Q(z){if(z=G(z),$(z))return 0;if(z<0)throw new i("number",">= 0",z);return z}function le(z,V=void 0){return V!=null&&g(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),z=Q(z),async function*(){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new s;for await(const L of this){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;z--<=0&&(yield L)}}.call(this)}function ue(z,V=void 0){return V!=null&&g(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),z=Q(z),async function*(){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new s;for await(const L of this){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;if(z-- >0&&(yield L),z<=0)return}}.call(this)}return Er.streamReturningOperators={asIndexedPairs:m(p,"readable.asIndexedPairs will be removed in a future version."),drop:le,filter:E,flatMap:ee,map:N,take:ue,compose:d},Er.promiseReturningOperators={every:C,forEach:B,reduce:K,toArray:W,some:S,find:_},Er}var Cn,Ji;function Yo(){if(Ji)return Cn;Ji=1;const{ArrayPrototypePop:r,Promise:e}=Ie(),{isIterable:t,isNodeStream:n,isWebStream:i}=dt(),{pipelineImpl:s}=ri(),{finished:o}=_t();Jo();function l(...g){return new e((w,P)=>{let O,R;const q=g[g.length-1];if(q&&typeof q=="object"&&!n(q)&&!t(q)&&!i(q)){const k=r(g);O=k.signal,R=k.end}s(g,(k,I)=>{k?P(k):w(I)},{signal:O,end:R})})}return Cn={finished:o,pipeline:l},Cn}var Zi;function Jo(){if(Zi)return fn.exports;Zi=1;const{Buffer:r}=Ct(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Ie(),{promisify:{custom:i}}=We(),{streamReturningOperators:s,promiseReturningOperators:o}=la(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=De(),g=Ko(),{setDefaultHighWaterMark:w,getDefaultHighWaterMark:P}=Mr(),{pipeline:O}=ri(),{destroyer:R}=qt(),q=_t(),k=Yo(),I=dt(),m=fn.exports=ei().Stream;m.isDestroyed=I.isDestroyed,m.isDisturbed=I.isDisturbed,m.isErrored=I.isErrored,m.isReadable=I.isReadable,m.isWritable=I.isWritable,m.Readable=Dr();for(const c of t(s)){let G=function(...$){if(new.target)throw l();return m.Readable.from(n(v,this,$))};const v=s[c];e(G,"name",{__proto__:null,value:v.name}),e(G,"length",{__proto__:null,value:v.length}),e(m.Readable.prototype,c,{__proto__:null,value:G,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(o)){let G=function(...$){if(new.target)throw l();return n(v,this,$)};const v=o[c];e(G,"name",{__proto__:null,value:v.name}),e(G,"length",{__proto__:null,value:v.length}),e(m.Readable.prototype,c,{__proto__:null,value:G,enumerable:!1,configurable:!0,writable:!0})}m.Writable=ti(),m.Duplex=ct(),m.Transform=Go(),m.PassThrough=Vo(),m.pipeline=O;const{addAbortSignal:u}=Br();return m.addAbortSignal=u,m.finished=q,m.destroy=R,m.compose=g,m.setDefaultHighWaterMark=w,m.getDefaultHighWaterMark=P,e(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return k}}),e(O,i,{__proto__:null,enumerable:!0,get(){return k.pipeline}}),e(q,i,{__proto__:null,enumerable:!0,get(){return k.finished}}),m.Stream=m,m._isUint8Array=function(v){return v instanceof Uint8Array},m._uint8ArrayToBuffer=function(v){return r.from(v.buffer,v.byteOffset,v.byteLength)},fn.exports}var Xi;function ua(){return Xi||(Xi=1,function(r){const e=Jo(),t=Yo(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports}(un)),un.exports}var kr=ua(),Pn,Qi;function Zo(){if(Qi)return Pn;Qi=1,Pn=s,s.default=s,s.stable=w,s.stableStringify=w;var r="[...]",e="[Circular]",t=[],n=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(R,q,k,I){typeof I>"u"&&(I=i()),l(R,"",0,[],void 0,0,I);var m;try{n.length===0?m=JSON.stringify(R,q,k):m=JSON.stringify(R,O(q),k)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var u=t.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return m}function o(R,q,k,I){var m=Object.getOwnPropertyDescriptor(I,k);m.get!==void 0?m.configurable?(Object.defineProperty(I,k,{value:R}),t.push([I,k,q,m])):n.push([q,k,R]):(I[k]=R,t.push([I,k,q]))}function l(R,q,k,I,m,u,c){u+=1;var v;if(typeof R=="object"&&R!==null){for(v=0;v<I.length;v++)if(I[v]===R){o(e,R,q,m);return}if(typeof c.depthLimit<"u"&&u>c.depthLimit){o(r,R,q,m);return}if(typeof c.edgesLimit<"u"&&k+1>c.edgesLimit){o(r,R,q,m);return}if(I.push(R),Array.isArray(R))for(v=0;v<R.length;v++)l(R[v],v,v,I,R,u,c);else{var G=Object.keys(R);for(v=0;v<G.length;v++){var $=G[v];l(R[$],$,v,I,R,u,c)}}I.pop()}}function g(R,q){return R<q?-1:R>q?1:0}function w(R,q,k,I){typeof I>"u"&&(I=i());var m=P(R,"",0,[],void 0,0,I)||R,u;try{n.length===0?u=JSON.stringify(m,q,k):u=JSON.stringify(m,O(q),k)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return u}function P(R,q,k,I,m,u,c){u+=1;var v;if(typeof R=="object"&&R!==null){for(v=0;v<I.length;v++)if(I[v]===R){o(e,R,q,m);return}try{if(typeof R.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&u>c.depthLimit){o(r,R,q,m);return}if(typeof c.edgesLimit<"u"&&k+1>c.edgesLimit){o(r,R,q,m);return}if(I.push(R),Array.isArray(R))for(v=0;v<R.length;v++)P(R[v],v,v,I,R,u,c);else{var G={},$=Object.keys(R).sort(g);for(v=0;v<$.length;v++){var J=$[v];P(R[J],J,v,I,R,u,c),G[J]=R[J]}if(typeof m<"u")t.push([m,q,R]),m[q]=G;else return G}I.pop()}}function O(R){return R=typeof R<"u"?R:function(q,k){return k},function(q,k){if(n.length>0)for(var I=0;I<n.length;I++){var m=n[I];if(m[1]===q&&m[0]===k){k=m[2],n.splice(I,1);break}}return R.call(this,q,k)}}return Pn}var fa=Zo();const ca=Ut(fa);var Sr={exports:{}},Ln,eo;function da(){if(eo)return Ln;eo=1,Ln=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){n[i]=e[i]}),n;function n(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),l=i[i.length-1];return typeof o=="function"&&o!==l&&Object.keys(l).forEach(function(g){o[g]=l[g]}),o}}return Ln}var to;function ni(){if(to)return Sr.exports;to=1;var r=da();Sr.exports=r(e),Sr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var i=function(){return i.called?i.value:(i.called=!0,i.value=n.apply(this,arguments))};return i.called=!1,i}function t(n){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=n.apply(this,arguments)},s=n.name||"Function wrapped with `once`";return i.onceError=s+" shouldn't be called more than once",i.called=!1,i}return Sr.exports}var Bn,ro;function Xo(){if(ro)return Bn;ro=1;var r=ni(),e=function(){},t=globalThis.Bare?queueMicrotask:process.nextTick.bind(process),n=function(o){return o.setHeader&&typeof o.abort=="function"},i=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},s=function(o,l,g){if(typeof l=="function")return s(o,null,l);l||(l={}),g=r(g||e);var w=o._writableState,P=o._readableState,O=l.readable||l.readable!==!1&&o.readable,R=l.writable||l.writable!==!1&&o.writable,q=!1,k=function(){o.writable||I()},I=function(){R=!1,O||g.call(o)},m=function(){O=!1,R||g.call(o)},u=function(J){g.call(o,J?new Error("exited with error code: "+J):null)},c=function(J){g.call(o,J)},v=function(){t(G)},G=function(){if(!q){if(O&&!(P&&P.ended&&!P.destroyed))return g.call(o,new Error("premature close"));if(R&&!(w&&w.ended&&!w.destroyed))return g.call(o,new Error("premature close"))}},$=function(){o.req.on("finish",I)};return n(o)?(o.on("complete",I),o.on("abort",v),o.req?$():o.on("request",$)):R&&!w&&(o.on("end",k),o.on("close",k)),i(o)&&o.on("exit",u),o.on("end",m),o.on("finish",I),l.error!==!1&&o.on("error",c),o.on("close",v),function(){q=!0,o.removeListener("complete",I),o.removeListener("abort",v),o.removeListener("request",$),o.req&&o.req.removeListener("finish",I),o.removeListener("end",k),o.removeListener("close",k),o.removeListener("finish",I),o.removeListener("exit",u),o.removeListener("end",m),o.removeListener("error",c),o.removeListener("close",v)}};return Bn=s,Bn}var ha=Xo();const no=Ut(ha);var ga=ni();const pa=Ut(ga);var Mn,io;function wa(){if(io)return Mn;io=1;var r=ni(),e=Xo(),t;try{t=ea}catch{}var n=function(){},i=typeof process>"u"?!1:/^v?\.0/.test(process.version),s=function(R){return typeof R=="function"},o=function(R){return!i||!t?!1:(R instanceof(t.ReadStream||n)||R instanceof(t.WriteStream||n))&&s(R.close)},l=function(R){return R.setHeader&&s(R.abort)},g=function(R,q,k,I){I=r(I);var m=!1;R.on("close",function(){m=!0}),e(R,{readable:q,writable:k},function(c){if(c)return I(c);m=!0,I()});var u=!1;return function(c){if(!m&&!u){if(u=!0,o(R))return R.close(n);if(l(R))return R.abort();if(s(R.destroy))return R.destroy();I(c||new Error("stream was destroyed"))}}},w=function(R){R()},P=function(R,q){return R.pipe(q)},O=function(){var R=Array.prototype.slice.call(arguments),q=s(R[R.length-1]||n)&&R.pop()||n;if(Array.isArray(R[0])&&(R=R[0]),R.length<2)throw new Error("pump requires two streams per minimum");var k,I=R.map(function(m,u){var c=u<R.length-1,v=u>0;return g(m,c,v,function(G){k||(k=G),G&&I.forEach(w),!c&&(I.forEach(w),q(k))})});return R.reduce(P)};return Mn=O,Mn}var ba=wa();const oo=Ut(ba);function Ar(){}const so="SYN",Dn="ACK",ao="BRK";class lo extends kr.Duplex{constructor(e){let{name:t,target:n,targetWindow:i=window,targetOrigin:s="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=i,this._targetOrigin=s,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(ao,null,Ar),this._haveSyn=!1,this._init=!1}_handShake(){this._write(so,null,Ar),this.cork()}_onData(e){if(!this._init)e===so?(this._haveSyn=!0,this._write(Dn,null,Ar)):e===Dn&&(this._init=!0,this._haveSyn||this._write(Dn,null,Ar),this.uncork());else if(e===ao)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const ya={rpc:{internal:-32603}},uo={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},fo=ya.rpc.internal,_a="Unspecified error message. This is a bug, please report it.";function Qo(r){return Number.isInteger(r)}function co(r){return typeof r=="string"&&r.length>0}function ho(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function es(r){const e=r;return!(!e||!Qo(e.code)||!co(e.message)||e.stack&&!co(e.stack))}function ma(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_a;if(Qo(r)){const t=r.toString();if(Object.hasOwn(uo,t))return uo[t].message}return e}const Ea={code:fo,message:ma(fo)};function Gn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function go(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return Gn(n)&&(e[t]=n),e},{})}function va(r){return Array.isArray(r)?r.map(e=>Gn(e)?e:ho(e)?go(e):null):ho(r)?go(r):Gn(r)?r:null}function Sa(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(es(r))return r;const t=va(r);return Ke(Ke({},e),{},{data:{cause:t}})}function po(r){let{fallbackError:e=Ea,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!es(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=Sa(r,e);return t||delete n.stack,n}function wo(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function Aa(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class Ur extends ta.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(t){let g;if(s.length>0&&([g]=s),g instanceof Error)throw g;const w=new Error(`Unhandled error.${g?` (${g.message})`:""}`);throw w.context=g,w}const l=n[e];if(l===void 0)return!1;if(typeof l=="function")wo(l,this,s);else{const g=l.length,w=Aa(l);for(let P=0;P<g;P+=1)wo(w[P],this,s)}return!0}}class Kt extends Error{constructor(e){let{code:t,message:n,data:i}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,i!==void 0&&(this.data=i)}toString(){return ca({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Vn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?e(n||i.error):!t||Array.isArray(i)?r(i):r(i.result)}};function Ra(){const r={};function e(){return!1}const t=new Ur;function n(g){const w=r[g.id];if(!w)throw new Error(`StreamMiddleware - Unknown response id "${g.id}"`);delete r[g.id],Object.assign(w.res,g),setTimeout(w.end)}function i(g){t.emit("notification",g)}function s(g,w,P){let O;try{!g.id?i(g):n(g)}catch(R){O=R}P(O)}const o=new kr.Duplex({objectMode:!0,read:e,write:s});return{events:t,middleware:(g,w,P,O)=>{o.push(g),r[g.id]={req:g,res:w,next:P,end:O}},stream:o}}function Ia(){return(r,e,t,n)=>{const i=r.id,s=Math.random().toString(36).slice(2);r.id=s,e.id=s,t(o=>{r.id=i,e.id=i,o()})}}class lt extends Ur{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const i=[];let s=null,o=!1;for(const l of n)if([s,o]=await lt._runMiddleware(e,t,l,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,t,n,i){return new Promise(s=>{const o=g=>{const w=g||t.error;w&&(typeof w=="object"&&Object.keys(w).includes("stack")===!1&&(w.stack="Stack trace is not available."),t.error=po(w,{shouldIncludeStack:!0,fallbackError:{message:w?.message||w?.toString(),code:w?.code||-32603,stack:w?.stack||"Stack trace is not available.",data:w?.data||w?.message||w?.toString()}})),s([w,!0])},l=g=>{t.error?o(t.error):(g&&(typeof g!="function"&&o(new Kt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(g)),s([null,!1]))};try{n(e,t,l,o)}catch(g){o(g)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,i)=>{t(s=>s?i(s):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Kt({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Kt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,i)=>{try{const[s,o,l]=await lt._runAllMiddleware(e,t,this._middleware);return o?(await lt._runReturnHandlers(l),i(s)):n(async g=>{try{await lt._runReturnHandlers(l)}catch(w){return g(w)}return g()})}catch(s){return i(s)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(i,s)=>{i&&s===void 0?n(i):t(s)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const q=new Kt({code:-32603,message:"request must be plain object"});return t(q,{id:void 0,jsonrpc:"2.0",error:q})}if(typeof e.method!="string"){const q=new Kt({code:-32603,message:"method must be string"});return t(q,{id:e.id,jsonrpc:"2.0",error:q})}const n=Ke({},e),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(q){s=q}if(s&&(delete i.result,!i.error)){var o,l,g,w,P,O,R;typeof s=="object"&&Object.keys(s).includes("stack")===!1&&(s.stack="Stack trace is not available."),i.error=po(s,{shouldIncludeStack:!0,fallbackError:{message:((o=s)===null||o===void 0?void 0:o.message)||((l=s)===null||l===void 0?void 0:l.toString()),code:((g=s)===null||g===void 0?void 0:g.code)||-32603,stack:((w=s)===null||w===void 0?void 0:w.stack)||"Stack trace is not available.",data:((P=s)===null||P===void 0?void 0:P.data)||((O=s)===null||O===void 0?void 0:O.message)||((R=s)===null||R===void 0?void 0:R.toString())}})}return t(s,i)}async _processRequest(e,t){const[n,i,s]=await lt._runAllMiddleware(e,t,this._middleware);if(lt._checkForCompletion(e,t,i),await lt._runReturnHandlers(s),n)throw n}}class Ta extends kr.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const bo=Symbol("IGNORE_SUBSTREAM");class xa extends kr.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Ke(Ke({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Ta({parent:this,name:e});return this._substreams[e]=t,Oa(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=bo}_read(){}_write(e,t,n){const{name:i,data:s}=e;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const o=this._substreams[i];return o?(o!==bo&&o.push(s),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n())}}function Oa(r,e){const t=pa(e);no(r,{readable:!1},t),no(r,{writable:!1},t)}var Jt={exports:{}};Jt.exports;var yo;function Na(){return yo||(yo=1,function(r,e){var t=200,n="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,l="[object Arguments]",g="[object Array]",w="[object AsyncFunction]",P="[object Boolean]",O="[object Date]",R="[object Error]",q="[object Function]",k="[object GeneratorFunction]",I="[object Map]",m="[object Number]",u="[object Null]",c="[object Object]",v="[object Proxy]",G="[object RegExp]",$="[object Set]",J="[object String]",X="[object Undefined]",a="[object WeakMap]",y="[object ArrayBuffer]",f="[object DataView]",h="[object Float32Array]",b="[object Float64Array]",d="[object Int8Array]",N="[object Int16Array]",p="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",_="[object Uint16Array]",B="[object Uint32Array]",E=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,W={};W[h]=W[b]=W[d]=W[N]=W[p]=W[S]=W[C]=W[_]=W[B]=!0,W[l]=W[g]=W[y]=W[P]=W[f]=W[O]=W[R]=W[q]=W[I]=W[m]=W[c]=W[G]=W[$]=W[J]=W[a]=!1;var ee=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Q=typeof self=="object"&&self&&self.Object===Object&&self,le=ee||Q||Function("return this")(),ue=e&&!e.nodeType&&e,z=ue&&!0&&r&&!r.nodeType&&r,V=z&&z.exports===ue,oe=V&&ee.process,ce=function(){try{var T=z&&z.require&&z.require("util").types;return T||oe&&oe.binding&&oe.binding("util")}catch{}}(),fe=ce&&ce.isTypedArray;function L(T,U,H){switch(H.length){case 0:return T.call(U);case 1:return T.call(U,H[0]);case 2:return T.call(U,H[0],H[1]);case 3:return T.call(U,H[0],H[1],H[2])}return T.apply(U,H)}function M(T,U){for(var H=-1,he=Array(T);++H<T;)he[H]=U(H);return he}function F(T){return function(U){return T(U)}}function ne(T,U){return T?.[U]}function se(T,U){return function(H){return T(U(H))}}var ie=Array.prototype,D=Function.prototype,Z=Object.prototype,re=le["__core-js_shared__"],Y=D.toString,we=Z.hasOwnProperty,Pe=function(){var T=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),ye=Z.toString,Me=Y.call(Object),xe=RegExp("^"+Y.call(we).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=V?le.Buffer:void 0,Ye=le.Symbol,mt=le.Uint8Array;Le&&Le.allocUnsafe;var Be=se(Object.getPrototypeOf,Object),sr=Object.create,Hr=Z.propertyIsEnumerable,ar=ie.splice,nt=Ye?Ye.toStringTag:void 0,Lt=function(){try{var T=Jr(Object,"defineProperty");return T({},"",{}),T}catch{}}(),zr=Le?Le.isBuffer:void 0,jt=Math.max,lr=Date.now,ur=Jr(le,"Map"),ht=Jr(Object,"create"),Wt=function(){function T(){}return function(U){if(!vt(U))return{};if(sr)return sr(U);T.prototype=U;var H=new T;return T.prototype=void 0,H}}();function it(T){var U=-1,H=T==null?0:T.length;for(this.clear();++U<H;){var he=T[U];this.set(he[0],he[1])}}function Gr(){this.__data__=ht?ht(null):{},this.size=0}function Ft(T){var U=this.has(T)&&delete this.__data__[T];return this.size-=U?1:0,U}function fr(T){var U=this.__data__;if(ht){var H=U[T];return H===n?void 0:H}return we.call(U,T)?U[T]:void 0}function A(T){var U=this.__data__;return ht?U[T]!==void 0:we.call(U,T)}function x(T,U){var H=this.__data__;return this.size+=this.has(T)?0:1,H[T]=ht&&U===void 0?n:U,this}it.prototype.clear=Gr,it.prototype.delete=Ft,it.prototype.get=fr,it.prototype.has=A,it.prototype.set=x;function te(T){var U=-1,H=T==null?0:T.length;for(this.clear();++U<H;){var he=T[U];this.set(he[0],he[1])}}function ae(){this.__data__=[],this.size=0}function de(T){var U=this.__data__,H=pr(U,T);if(H<0)return!1;var he=U.length-1;return H==he?U.pop():ar.call(U,H,1),--this.size,!0}function Oe(T){var U=this.__data__,H=pr(U,T);return H<0?void 0:U[H][1]}function ke(T){return pr(this.__data__,T)>-1}function cr(T,U){var H=this.__data__,he=pr(H,T);return he<0?(++this.size,H.push([T,U])):H[he][1]=U,this}te.prototype.clear=ae,te.prototype.delete=de,te.prototype.get=Oe,te.prototype.has=ke,te.prototype.set=cr;function Ue(T){var U=-1,H=T==null?0:T.length;for(this.clear();++U<H;){var he=T[U];this.set(he[0],he[1])}}function dr(){this.size=0,this.__data__={hash:new it,map:new(ur||te),string:new it}}function Vr(T){var U=br(this,T).delete(T);return this.size-=U?1:0,U}function hr(T){return br(this,T).get(T)}function gr(T){return br(this,T).has(T)}function $t(T,U){var H=br(this,T),he=H.size;return H.set(T,U),this.size+=H.size==he?0:1,this}Ue.prototype.clear=dr,Ue.prototype.delete=Vr,Ue.prototype.get=hr,Ue.prototype.has=gr,Ue.prototype.set=$t;function et(T){var U=this.__data__=new te(T);this.size=U.size}function Ht(){this.__data__=new te,this.size=0}function Et(T){var U=this.__data__,H=U.delete(T);return this.size=U.size,H}function ot(T){return this.__data__.get(T)}function Je(T){return this.__data__.has(T)}function _s(T,U){var H=this.__data__;if(H instanceof te){var he=H.__data__;if(!ur||he.length<t-1)return he.push([T,U]),this.size=++H.size,this;H=this.__data__=new Ue(he)}return H.set(T,U),this.size=H.size,this}et.prototype.clear=Ht,et.prototype.delete=Et,et.prototype.get=ot,et.prototype.has=Je,et.prototype.set=_s;function ms(T,U){var H=Qr(T),he=!H&&Xr(T),be=!H&&!he&&bi(T),me=!H&&!he&&!be&&_i(T),Se=H||he||be||me,_e=Se?M(T.length,String):[],Ae=_e.length;for(var Ze in T)Se&&(Ze=="length"||be&&(Ze=="offset"||Ze=="parent")||me&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||pi(Ze,Ae))||_e.push(Ze);return _e}function Kr(T,U,H){(H!==void 0&&!yr(T[U],H)||H===void 0&&!(U in T))&&Yr(T,U,H)}function Es(T,U,H){var he=T[U];(!(we.call(T,U)&&yr(he,H))||H===void 0&&!(U in T))&&Yr(T,U,H)}function pr(T,U){for(var H=T.length;H--;)if(yr(T[H][0],U))return H;return-1}function Yr(T,U,H){U=="__proto__"&&Lt?Lt(T,U,{configurable:!0,enumerable:!0,value:H,writable:!0}):T[U]=H}var vs=Ms();function wr(T){return T==null?T===void 0?X:u:nt&&nt in Object(T)?Ds(T):Fs(T)}function hi(T){return zt(T)&&wr(T)==l}function Ss(T){if(!vt(T)||js(T))return!1;var U=tn(T)?xe:j;return U.test(Gs(T))}function As(T){return zt(T)&&yi(T.length)&&!!W[wr(T)]}function Rs(T){if(!vt(T))return Ws(T);var U=wi(T),H=[];for(var he in T)he=="constructor"&&(U||!we.call(T,he))||H.push(he);return H}function gi(T,U,H,he,be){T!==U&&vs(U,function(me,Se){if(be||(be=new et),vt(me))Is(T,U,Se,H,gi,he,be);else{var _e=he?he(Zr(T,Se),me,Se+"",T,U,be):void 0;_e===void 0&&(_e=me),Kr(T,Se,_e)}},mi)}function Is(T,U,H,he,be,me,Se){var _e=Zr(T,H),Ae=Zr(U,H),Ze=Se.get(Ae);if(Ze){Kr(T,H,Ze);return}var Fe=me?me(_e,Ae,H+"",T,U,Se):void 0,Gt=Fe===void 0;if(Gt){var rn=Qr(Ae),nn=!rn&&bi(Ae),vi=!rn&&!nn&&_i(Ae);Fe=Ae,rn||nn||vi?Qr(_e)?Fe=_e:Vs(_e)?Fe=Ps(_e):nn?(Gt=!1,Fe=Os(Ae)):vi?(Gt=!1,Fe=Cs(Ae)):Fe=[]:Ks(Ae)||Xr(Ae)?(Fe=_e,Xr(_e)?Fe=Ys(_e):(!vt(_e)||tn(_e))&&(Fe=ks(Ae))):Gt=!1}Gt&&(Se.set(Ae,Fe),be(Fe,Ae,he,me,Se),Se.delete(Ae)),Kr(T,H,Fe)}function Ts(T,U){return Hs($s(T,U,Ei),T+"")}var xs=Lt?function(T,U){return Lt(T,"toString",{configurable:!0,enumerable:!1,value:Zs(U),writable:!0})}:Ei;function Os(T,U){return T.slice()}function Ns(T){var U=new T.constructor(T.byteLength);return new mt(U).set(new mt(T)),U}function Cs(T,U){var H=Ns(T.buffer);return new T.constructor(H,T.byteOffset,T.length)}function Ps(T,U){var H=-1,he=T.length;for(U||(U=Array(he));++H<he;)U[H]=T[H];return U}function Ls(T,U,H,he){var be=!H;H||(H={});for(var me=-1,Se=U.length;++me<Se;){var _e=U[me],Ae=void 0;Ae===void 0&&(Ae=T[_e]),be?Yr(H,_e,Ae):Es(H,_e,Ae)}return H}function Bs(T){return Ts(function(U,H){var he=-1,be=H.length,me=be>1?H[be-1]:void 0,Se=be>2?H[2]:void 0;for(me=T.length>3&&typeof me=="function"?(be--,me):void 0,Se&&Us(H[0],H[1],Se)&&(me=be<3?void 0:me,be=1),U=Object(U);++he<be;){var _e=H[he];_e&&T(U,_e,he,me)}return U})}function Ms(T){return function(U,H,he){for(var be=-1,me=Object(U),Se=he(U),_e=Se.length;_e--;){var Ae=Se[++be];if(H(me[Ae],Ae,me)===!1)break}return U}}function br(T,U){var H=T.__data__;return qs(U)?H[typeof U=="string"?"string":"hash"]:H.map}function Jr(T,U){var H=ne(T,U);return Ss(H)?H:void 0}function Ds(T){var U=we.call(T,nt),H=T[nt];try{T[nt]=void 0;var he=!0}catch{}var be=ye.call(T);return he&&(U?T[nt]=H:delete T[nt]),be}function ks(T){return typeof T.constructor=="function"&&!wi(T)?Wt(Be(T)):{}}function pi(T,U){var H=typeof T;return U=U??o,!!U&&(H=="number"||H!="symbol"&&K.test(T))&&T>-1&&T%1==0&&T<U}function Us(T,U,H){if(!vt(H))return!1;var he=typeof U;return(he=="number"?en(H)&&pi(U,H.length):he=="string"&&U in H)?yr(H[U],T):!1}function qs(T){var U=typeof T;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?T!=="__proto__":T===null}function js(T){return!!Pe&&Pe in T}function wi(T){var U=T&&T.constructor,H=typeof U=="function"&&U.prototype||Z;return T===H}function Ws(T){var U=[];if(T!=null)for(var H in Object(T))U.push(H);return U}function Fs(T){return ye.call(T)}function $s(T,U,H){return U=jt(U===void 0?T.length-1:U,0),function(){for(var he=arguments,be=-1,me=jt(he.length-U,0),Se=Array(me);++be<me;)Se[be]=he[U+be];be=-1;for(var _e=Array(U+1);++be<U;)_e[be]=he[be];return _e[U]=H(Se),L(T,this,_e)}}function Zr(T,U){if(!(U==="constructor"&&typeof T[U]=="function")&&U!="__proto__")return T[U]}var Hs=zs(xs);function zs(T){var U=0,H=0;return function(){var he=lr(),be=s-(he-H);if(H=he,be>0){if(++U>=i)return arguments[0]}else U=0;return T.apply(void 0,arguments)}}function Gs(T){if(T!=null){try{return Y.call(T)}catch{}try{return T+""}catch{}}return""}function yr(T,U){return T===U||T!==T&&U!==U}var Xr=hi(function(){return arguments}())?hi:function(T){return zt(T)&&we.call(T,"callee")&&!Hr.call(T,"callee")},Qr=Array.isArray;function en(T){return T!=null&&yi(T.length)&&!tn(T)}function Vs(T){return zt(T)&&en(T)}var bi=zr||Xs;function tn(T){if(!vt(T))return!1;var U=wr(T);return U==q||U==k||U==w||U==v}function yi(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=o}function vt(T){var U=typeof T;return T!=null&&(U=="object"||U=="function")}function zt(T){return T!=null&&typeof T=="object"}function Ks(T){if(!zt(T)||wr(T)!=c)return!1;var U=Be(T);if(U===null)return!0;var H=we.call(U,"constructor")&&U.constructor;return typeof H=="function"&&H instanceof H&&Y.call(H)==Me}var _i=fe?F(fe):As;function Ys(T){return Ls(T,mi(T))}function mi(T){return en(T)?ms(T):Rs(T)}var Js=Bs(function(T,U,H){gi(T,U,H)});function Zs(T){return function(){return T}}function Ei(T){return T}function Xs(){return!1}r.exports=Js}(Jt,Jt.exports)),Jt.exports}Na();var Nr={exports:{}},Ca=Nr.exports,_o;function Pa(){return _o||(_o=1,function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(Ca,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(I,m){var u=I[m];if(typeof u.bind=="function")return u.bind(I);try{return Function.prototype.bind.call(u,I)}catch{return function(){return Function.prototype.apply.apply(u,[I,arguments])}}}function g(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function w(I){return I==="debug"&&(I="log"),typeof console===t?!1:I==="trace"&&n?g:console[I]!==void 0?l(console,I):console.log!==void 0?l(console,"log"):e}function P(){for(var I=this.getLevel(),m=0;m<i.length;m++){var u=i[m];this[u]=m<I?e:this.methodFactory(u,I,this.name)}if(this.log=this.debug,typeof console===t&&I<this.levels.SILENT)return"No console available for logging"}function O(I){return function(){typeof console!==t&&(P.call(this),this[I].apply(this,arguments))}}function R(I,m,u){return w(I)||O.apply(this,arguments)}function q(I,m){var u=this,c,v,G,$="loglevel";typeof I=="string"?$+=":"+I:typeof I=="symbol"&&($=void 0);function J(h){var b=(i[h]||"silent").toUpperCase();if(!(typeof window===t||!$)){try{window.localStorage[$]=b;return}catch{}try{window.document.cookie=encodeURIComponent($)+"="+b+";"}catch{}}}function X(){var h;if(!(typeof window===t||!$)){try{h=window.localStorage[$]}catch{}if(typeof h===t)try{var b=window.document.cookie,d=encodeURIComponent($),N=b.indexOf(d+"=");N!==-1&&(h=/^([^;]+)/.exec(b.slice(N+d.length+1))[1])}catch{}return u.levels[h]===void 0&&(h=void 0),h}}function a(){if(!(typeof window===t||!$)){try{window.localStorage.removeItem($)}catch{}try{window.document.cookie=encodeURIComponent($)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function y(h){var b=h;if(typeof b=="string"&&u.levels[b.toUpperCase()]!==void 0&&(b=u.levels[b.toUpperCase()]),typeof b=="number"&&b>=0&&b<=u.levels.SILENT)return b;throw new TypeError("log.setLevel() called with invalid level: "+h)}u.name=I,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=m||R,u.getLevel=function(){return G??v??c},u.setLevel=function(h,b){return G=y(h),b!==!1&&J(G),P.call(u)},u.setDefaultLevel=function(h){v=y(h),X()||u.setLevel(h,!1)},u.resetLevel=function(){G=null,a(),P.call(u)},u.enableAll=function(h){u.setLevel(u.levels.TRACE,h)},u.disableAll=function(h){u.setLevel(u.levels.SILENT,h)},u.rebuild=function(){if(o!==u&&(c=y(o.getLevel())),P.call(u),o===u)for(var h in s)s[h].rebuild()},c=y(o?o.getLevel():"WARN");var f=X();f!=null&&(G=y(f)),P.call(u)}o=new q,o.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var u=s[m];return u||(u=s[m]=new q(m,o.methodFactory)),u};var k=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})}(Nr)),Nr.exports}var ts=Pa();const Cr=Ut(ts),La=Cr.getLogger("http-helpers");La.setLevel(ts.levels.INFO);function mo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Ba(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function qr(r,...e){if(!Ba(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Ma(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mo(r.outputLen),mo(r.blockLen)}function Pr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Da(r,e){qr(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const kn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Un=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),tt=(r,e)=>r<<32-e|r>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function ka(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function ii(r){return typeof r=="string"&&(r=ka(r)),qr(r),r}function Ua(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];qr(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class rs{clone(){return this._cloneInto()}}function qa(r){const e=n=>r().update(ii(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function ja(r=32){if(kn&&typeof kn.getRandomValues=="function")return kn.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Wa(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),g=n?4:0,w=n?0:4;r.setUint32(e+g,o,n),r.setUint32(e+w,l,n)}const Fa=(r,e,t)=>r&e^~r&t,$a=(r,e,t)=>r&e^r&t^e&t;class Ha extends rs{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Un(this.buffer)}update(e){Pr(this);const{view:t,buffer:n,blockLen:i}=this;e=ii(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const g=Un(e);for(;i<=s-o;o+=i)this.process(g,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pr(this),Da(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let O=o;O<i;O++)t[O]=0;Wa(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=Un(e),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=g/4,P=this.get();if(w>P.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<w;O++)l.setUint32(4*O,P[O],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}}const za=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wt=new Uint32Array(64);class Ga extends Ha{constructor(){super(64,32,8,!1),this.A=pt[0]|0,this.B=pt[1]|0,this.C=pt[2]|0,this.D=pt[3]|0,this.E=pt[4]|0,this.F=pt[5]|0,this.G=pt[6]|0,this.H=pt[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:l,H:g}=this;return[e,t,n,i,s,o,l,g]}set(e,t,n,i,s,o,l,g){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=g|0}process(e,t){for(let O=0;O<16;O++,t+=4)wt[O]=e.getUint32(t,!1);for(let O=16;O<64;O++){const R=wt[O-15],q=wt[O-2],k=tt(R,7)^tt(R,18)^R>>>3,I=tt(q,17)^tt(q,19)^q>>>10;wt[O]=I+wt[O-7]+k+wt[O-16]|0}let{A:n,B:i,C:s,D:o,E:l,F:g,G:w,H:P}=this;for(let O=0;O<64;O++){const R=tt(l,6)^tt(l,11)^tt(l,25),q=P+R+Fa(l,g,w)+za[O]+wt[O]|0,I=(tt(n,2)^tt(n,13)^tt(n,22))+$a(n,i,s)|0;P=w,w=g,g=l,l=o+q|0,o=s,s=i,i=n,n=q+I|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,g=g+this.F|0,w=w+this.G|0,P=P+this.H|0,this.set(n,i,s,o,l,g,w,P)}roundClean(){wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Va=qa(()=>new Ga);class ns extends rs{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ma(e);const n=ii(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Pr(this),this.iHash.update(e),this}digestInto(e){Pr(this),qr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const is=(r,e,t)=>new ns(r,e).update(t).digest();is.create=(r,e)=>new ns(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const os=BigInt(0),jr=BigInt(1),Ka=BigInt(2);function Ot(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function nr(r){if(!Ot(r))throw new Error("Uint8Array expected")}const Ya=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Mt(r){nr(r);let e="";for(let t=0;t<r.length;t++)e+=Ya[r[t]];return e}function ss(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function oi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const at={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Eo(r){if(r>=at._0&&r<=at._9)return r-at._0;if(r>=at._A&&r<=at._F)return r-(at._A-10);if(r>=at._a&&r<=at._f)return r-(at._a-10)}function Dt(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=Eo(r.charCodeAt(s)),l=Eo(r.charCodeAt(s+1));if(o===void 0||l===void 0){const g=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+s)}n[i]=o*16+l}return n}function xt(r){return oi(Mt(r))}function si(r){return nr(r),oi(Mt(Uint8Array.from(r).reverse()))}function kt(r,e){return Dt(r.toString(16).padStart(e*2,"0"))}function ai(r,e){return kt(r,e).reverse()}function Ja(r){return Dt(ss(r))}function Qe(r,e,t){let n;if(typeof e=="string")try{n=Dt(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Ot(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function tr(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];nr(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function Za(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Xa(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Qa(r){let e;for(e=0;r>os;r>>=jr,e+=1);return e}function el(r,e){return r>>BigInt(e)&jr}function tl(r,e,t){return r|(t?jr:os)<<BigInt(e)}const li=r=>(Ka<<BigInt(r-1))-jr,qn=r=>new Uint8Array(r),vo=r=>Uint8Array.from(r);function as(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=qn(r),i=qn(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},l=(...O)=>t(i,n,...O),g=(O=qn())=>{i=l(vo([0]),O),n=l(),O.length!==0&&(i=l(vo([1]),O),n=l())},w=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let O=0;const R=[];for(;O<e;){n=l();const q=n.slice();R.push(q),O+=n.length}return tr(...R)};return(O,R)=>{o(),g(O);let q;for(;!(q=R(w()));)g();return o(),q}}const rl={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Ot(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function ir(r,e,t={}){const n=(i,s,o)=>{const l=rl[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const g=r[i];if(!(o&&g===void 0)&&!l(g,r))throw new Error(`Invalid param ${String(i)}=${g} (${typeof g}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const nl=Object.freeze(Object.defineProperty({__proto__:null,abytes:nr,bitGet:el,bitLen:Qa,bitMask:li,bitSet:tl,bytesToHex:Mt,bytesToNumberBE:xt,bytesToNumberLE:si,concatBytes:tr,createHmacDrbg:as,ensureBytes:Qe,equalBytes:Za,hexToBytes:Dt,hexToNumber:oi,isBytes:Ot,numberToBytesBE:kt,numberToBytesLE:ai,numberToHexUnpadded:ss,numberToVarBytesBE:Ja,utf8ToBytes:Xa,validateObject:ir},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ce=BigInt(0),Te=BigInt(1),It=BigInt(2),il=BigInt(3),Kn=BigInt(4),So=BigInt(5),Ao=BigInt(8);BigInt(9);BigInt(16);function je(r,e){const t=r%e;return t>=Ce?t:e+t}function ol(r,e,t){if(t<=Ce||e<Ce)throw new Error("Expected power/modulo > 0");if(t===Te)return Ce;let n=Te;for(;e>Ce;)e&Te&&(n=n*r%t),r=r*r%t,e>>=Te;return n}function He(r,e,t){let n=r;for(;e-- >Ce;)n*=n,n%=t;return n}function Yn(r,e){if(r===Ce||e<=Ce)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=je(r,e),n=e,i=Ce,s=Te;for(;t!==Ce;){const l=n/t,g=n%t,w=i-s*l;n=t,t=g,i=s,s=w}if(n!==Te)throw new Error("invert: does not exist");return je(i,e)}function sl(r){const e=(r-Te)/It;let t,n,i;for(t=r-Te,n=0;t%It===Ce;t/=It,n++);for(i=It;i<r&&ol(i,e,r)!==r-Te;i++);if(n===1){const o=(r+Te)/Kn;return function(g,w){const P=g.pow(w,o);if(!g.eql(g.sqr(P),w))throw new Error("Cannot find square root");return P}}const s=(t+Te)/It;return function(l,g){if(l.pow(g,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let w=n,P=l.pow(l.mul(l.ONE,i),t),O=l.pow(g,s),R=l.pow(g,t);for(;!l.eql(R,l.ONE);){if(l.eql(R,l.ZERO))return l.ZERO;let q=1;for(let I=l.sqr(R);q<w&&!l.eql(I,l.ONE);q++)I=l.sqr(I);const k=l.pow(P,Te<<BigInt(w-q-1));P=l.sqr(k),O=l.mul(O,k),R=l.mul(R,P),w=q}return O}}function al(r){if(r%Kn===il){const e=(r+Te)/Kn;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Ao===So){const e=(r-So)/Ao;return function(n,i){const s=n.mul(i,It),o=n.pow(s,e),l=n.mul(i,o),g=n.mul(n.mul(l,It),o),w=n.mul(l,n.sub(g,n.ONE));if(!n.eql(n.sqr(w),i))throw new Error("Cannot find square root");return w}}return sl(r)}const ll=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ul(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=ll.reduce((n,i)=>(n[i]="function",n),e);return ir(r,t)}function fl(r,e,t){if(t<Ce)throw new Error("Expected power > 0");if(t===Ce)return r.ONE;if(t===Te)return e;let n=r.ONE,i=e;for(;t>Ce;)t&Te&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Te;return n}function cl(r,e){const t=new Array(e.length),n=e.reduce((s,o,l)=>r.is0(o)?s:(t[l]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,l)=>r.is0(o)?s:(t[l]=r.mul(s,t[l]),r.mul(s,o)),i),t}function ls(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function dl(r,e,t=!1,n={}){if(r<=Ce)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=ls(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=al(r),l=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:li(i),ZERO:Ce,ONE:Te,create:g=>je(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return Ce<=g&&g<r},is0:g=>g===Ce,isOdd:g=>(g&Te)===Te,neg:g=>je(-g,r),eql:(g,w)=>g===w,sqr:g=>je(g*g,r),add:(g,w)=>je(g+w,r),sub:(g,w)=>je(g-w,r),mul:(g,w)=>je(g*w,r),pow:(g,w)=>fl(l,g,w),div:(g,w)=>je(g*Yn(w,r),r),sqrN:g=>g*g,addN:(g,w)=>g+w,subN:(g,w)=>g-w,mulN:(g,w)=>g*w,inv:g=>Yn(g,r),sqrt:n.sqrt||(g=>o(l,g)),invertBatch:g=>cl(l,g),cmov:(g,w,P)=>P?w:g,toBytes:g=>t?ai(g,s):kt(g,s),fromBytes:g=>{if(g.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${g.length}`);return t?si(g):xt(g)}});return Object.freeze(l)}function us(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function fs(r){const e=us(r);return e+Math.ceil(e/2)}function hl(r,e,t=!1){const n=r.length,i=us(e),s=fs(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=t?xt(r):si(r),l=je(o,e-Te)+Te;return t?ai(l,i):kt(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gl=BigInt(0),jn=BigInt(1);function pl(r,e){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=r.ZERO,l=i;for(;s>gl;)s&jn&&(o=o.add(l)),l=l.double(),s>>=jn;return o},precomputeWindow(i,s){const{windows:o,windowSize:l}=n(s),g=[];let w=i,P=w;for(let O=0;O<o;O++){P=w,g.push(P);for(let R=1;R<l;R++)P=P.add(w),g.push(P);w=P.double()}return g},wNAF(i,s,o){const{windows:l,windowSize:g}=n(i);let w=r.ZERO,P=r.BASE;const O=BigInt(2**i-1),R=2**i,q=BigInt(i);for(let k=0;k<l;k++){const I=k*g;let m=Number(o&O);o>>=q,m>g&&(m-=R,o+=jn);const u=I,c=I+Math.abs(m)-1,v=k%2!==0,G=m<0;m===0?P=P.add(t(v,s[u])):w=w.add(t(G,s[c]))}return{p:w,f:P}},wNAFCached(i,s,o,l){const g=i._WINDOW_SIZE||1;let w=s.get(i);return w||(w=this.precomputeWindow(i,g),g!==1&&s.set(i,l(w))),this.wNAF(g,w,o)}}}function cs(r){return ul(r.Fp),ir(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ls(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wl(r){const e=cs(r);ir(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:bl,hexToBytes:yl}=nl,Tt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=Tt;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:bl(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=Tt,t=typeof r=="string"?yl(r):r;nr(t);let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Tt._parseInt(t.subarray(2)),{d:o,l}=Tt._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=w=>Number.parseInt(w[0],16)&8?"00"+w:w,t=w=>{const P=w.toString(16);return P.length&1?`0${P}`:P},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,o=i.length/2,l=t(s),g=t(o);return`30${t(o+s+4)}02${g}${i}02${l}${n}`}},ut=BigInt(0),Ve=BigInt(1);BigInt(2);const Ro=BigInt(3);BigInt(4);function _l(r){const e=wl(r),{Fp:t}=e,n=e.toBytes||((k,I,m)=>{const u=I.toAffine();return tr(Uint8Array.from([4]),t.toBytes(u.x),t.toBytes(u.y))}),i=e.fromBytes||(k=>{const I=k.subarray(1),m=t.fromBytes(I.subarray(0,t.BYTES)),u=t.fromBytes(I.subarray(t.BYTES,2*t.BYTES));return{x:m,y:u}});function s(k){const{a:I,b:m}=e,u=t.sqr(k),c=t.mul(u,k);return t.add(t.add(c,t.mul(k,I)),m)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(k){return typeof k=="bigint"&&ut<k&&k<e.n}function l(k){if(!o(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(k){const{allowedPrivateKeyLengths:I,nByteLength:m,wrapPrivateKey:u,n:c}=e;if(I&&typeof k!="bigint"){if(Ot(k)&&(k=Mt(k)),typeof k!="string"||!I.includes(k.length))throw new Error("Invalid key");k=k.padStart(m*2,"0")}let v;try{v=typeof k=="bigint"?k:xt(Qe("private key",k,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof k}`)}return u&&(v=je(v,c)),l(v),v}const w=new Map;function P(k){if(!(k instanceof O))throw new Error("ProjectivePoint expected")}class O{constructor(I,m,u){if(this.px=I,this.py=m,this.pz=u,I==null||!t.isValid(I))throw new Error("x required");if(m==null||!t.isValid(m))throw new Error("y required");if(u==null||!t.isValid(u))throw new Error("z required")}static fromAffine(I){const{x:m,y:u}=I||{};if(!I||!t.isValid(m)||!t.isValid(u))throw new Error("invalid affine point");if(I instanceof O)throw new Error("projective point not allowed");const c=v=>t.eql(v,t.ZERO);return c(m)&&c(u)?O.ZERO:new O(m,u,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const m=t.invertBatch(I.map(u=>u.pz));return I.map((u,c)=>u.toAffine(m[c])).map(O.fromAffine)}static fromHex(I){const m=O.fromAffine(i(Qe("pointHex",I)));return m.assertValidity(),m}static fromPrivateKey(I){return O.BASE.multiply(g(I))}_setWindowSize(I){this._WINDOW_SIZE=I,w.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:I,y:m}=this.toAffine();if(!t.isValid(I)||!t.isValid(m))throw new Error("bad point: x or y not FE");const u=t.sqr(m),c=s(I);if(!t.eql(u,c))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(t.isOdd)return!t.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){P(I);const{px:m,py:u,pz:c}=this,{px:v,py:G,pz:$}=I,J=t.eql(t.mul(m,$),t.mul(v,c)),X=t.eql(t.mul(u,$),t.mul(G,c));return J&&X}negate(){return new O(this.px,t.neg(this.py),this.pz)}double(){const{a:I,b:m}=e,u=t.mul(m,Ro),{px:c,py:v,pz:G}=this;let $=t.ZERO,J=t.ZERO,X=t.ZERO,a=t.mul(c,c),y=t.mul(v,v),f=t.mul(G,G),h=t.mul(c,v);return h=t.add(h,h),X=t.mul(c,G),X=t.add(X,X),$=t.mul(I,X),J=t.mul(u,f),J=t.add($,J),$=t.sub(y,J),J=t.add(y,J),J=t.mul($,J),$=t.mul(h,$),X=t.mul(u,X),f=t.mul(I,f),h=t.sub(a,f),h=t.mul(I,h),h=t.add(h,X),X=t.add(a,a),a=t.add(X,a),a=t.add(a,f),a=t.mul(a,h),J=t.add(J,a),f=t.mul(v,G),f=t.add(f,f),a=t.mul(f,h),$=t.sub($,a),X=t.mul(f,y),X=t.add(X,X),X=t.add(X,X),new O($,J,X)}add(I){P(I);const{px:m,py:u,pz:c}=this,{px:v,py:G,pz:$}=I;let J=t.ZERO,X=t.ZERO,a=t.ZERO;const y=e.a,f=t.mul(e.b,Ro);let h=t.mul(m,v),b=t.mul(u,G),d=t.mul(c,$),N=t.add(m,u),p=t.add(v,G);N=t.mul(N,p),p=t.add(h,b),N=t.sub(N,p),p=t.add(m,c);let S=t.add(v,$);return p=t.mul(p,S),S=t.add(h,d),p=t.sub(p,S),S=t.add(u,c),J=t.add(G,$),S=t.mul(S,J),J=t.add(b,d),S=t.sub(S,J),a=t.mul(y,p),J=t.mul(f,d),a=t.add(J,a),J=t.sub(b,a),a=t.add(b,a),X=t.mul(J,a),b=t.add(h,h),b=t.add(b,h),d=t.mul(y,d),p=t.mul(f,p),b=t.add(b,d),d=t.sub(h,d),d=t.mul(y,d),p=t.add(p,d),h=t.mul(b,p),X=t.add(X,h),h=t.mul(S,p),J=t.mul(N,J),J=t.sub(J,h),h=t.mul(N,b),a=t.mul(S,a),a=t.add(a,h),new O(J,X,a)}subtract(I){return this.add(I.negate())}is0(){return this.equals(O.ZERO)}wNAF(I){return q.wNAFCached(this,w,I,m=>{const u=t.invertBatch(m.map(c=>c.pz));return m.map((c,v)=>c.toAffine(u[v])).map(O.fromAffine)})}multiplyUnsafe(I){const m=O.ZERO;if(I===ut)return m;if(l(I),I===Ve)return this;const{endo:u}=e;if(!u)return q.unsafeLadder(this,I);let{k1neg:c,k1:v,k2neg:G,k2:$}=u.splitScalar(I),J=m,X=m,a=this;for(;v>ut||$>ut;)v&Ve&&(J=J.add(a)),$&Ve&&(X=X.add(a)),a=a.double(),v>>=Ve,$>>=Ve;return c&&(J=J.negate()),G&&(X=X.negate()),X=new O(t.mul(X.px,u.beta),X.py,X.pz),J.add(X)}multiply(I){l(I);let m=I,u,c;const{endo:v}=e;if(v){const{k1neg:G,k1:$,k2neg:J,k2:X}=v.splitScalar(m);let{p:a,f:y}=this.wNAF($),{p:f,f:h}=this.wNAF(X);a=q.constTimeNegate(G,a),f=q.constTimeNegate(J,f),f=new O(t.mul(f.px,v.beta),f.py,f.pz),u=a.add(f),c=y.add(h)}else{const{p:G,f:$}=this.wNAF(m);u=G,c=$}return O.normalizeZ([u,c])[0]}multiplyAndAddUnsafe(I,m,u){const c=O.BASE,v=($,J)=>J===ut||J===Ve||!$.equals(c)?$.multiplyUnsafe(J):$.multiply(J),G=v(this,m).add(v(I,u));return G.is0()?void 0:G}toAffine(I){const{px:m,py:u,pz:c}=this,v=this.is0();I==null&&(I=v?t.ONE:t.inv(c));const G=t.mul(m,I),$=t.mul(u,I),J=t.mul(c,I);if(v)return{x:t.ZERO,y:t.ZERO};if(!t.eql(J,t.ONE))throw new Error("invZ was invalid");return{x:G,y:$}}isTorsionFree(){const{h:I,isTorsionFree:m}=e;if(I===Ve)return!0;if(m)return m(O,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:m}=e;return I===Ve?this:m?m(O,this):this.multiplyUnsafe(e.h)}toRawBytes(I=!0){return this.assertValidity(),n(O,this,I)}toHex(I=!0){return Mt(this.toRawBytes(I))}}O.BASE=new O(e.Gx,e.Gy,t.ONE),O.ZERO=new O(t.ZERO,t.ONE,t.ZERO);const R=e.nBitLength,q=pl(O,e.endo?Math.ceil(R/2):R);return{CURVE:e,ProjectivePoint:O,normPrivateKeyToScalar:g,weierstrassEquation:s,isWithinCurveOrder:o}}function ml(r){const e=cs(r);return ir(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function El(r){const e=ml(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(p){return ut<p&&p<t.ORDER}function l(p){return je(p,n)}function g(p){return Yn(p,n)}const{ProjectivePoint:w,normPrivateKeyToScalar:P,weierstrassEquation:O,isWithinCurveOrder:R}=_l({...e,toBytes(p,S,C){const _=S.toAffine(),B=t.toBytes(_.x),E=tr;return C?E(Uint8Array.from([S.hasEvenY()?2:3]),B):E(Uint8Array.from([4]),B,t.toBytes(_.y))},fromBytes(p){const S=p.length,C=p[0],_=p.subarray(1);if(S===i&&(C===2||C===3)){const B=xt(_);if(!o(B))throw new Error("Point is not on curve");const E=O(B);let j;try{j=t.sqrt(E)}catch(ee){const Q=ee instanceof Error?": "+ee.message:"";throw new Error("Point is not on curve"+Q)}const K=(j&Ve)===Ve;return(C&1)===1!==K&&(j=t.neg(j)),{x:B,y:j}}else if(S===s&&C===4){const B=t.fromBytes(_.subarray(0,t.BYTES)),E=t.fromBytes(_.subarray(t.BYTES,2*t.BYTES));return{x:B,y:E}}else throw new Error(`Point of length ${S} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),q=p=>Mt(kt(p,e.nByteLength));function k(p){const S=n>>Ve;return p>S}function I(p){return k(p)?l(-p):p}const m=(p,S,C)=>xt(p.slice(S,C));class u{constructor(S,C,_){this.r=S,this.s=C,this.recovery=_,this.assertValidity()}static fromCompact(S){const C=e.nByteLength;return S=Qe("compactSignature",S,C*2),new u(m(S,0,C),m(S,C,2*C))}static fromDER(S){const{r:C,s:_}=Tt.toSig(Qe("DER",S));return new u(C,_)}assertValidity(){if(!R(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!R(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new u(this.r,this.s,S)}recoverPublicKey(S){const{r:C,s:_,recovery:B}=this,E=X(Qe("msgHash",S));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const j=B===2||B===3?C+e.n:C;if(j>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=(B&1)===0?"02":"03",W=w.fromHex(K+q(j)),ee=g(j),Q=l(-E*ee),le=l(_*ee),ue=w.BASE.multiplyAndAddUnsafe(W,Q,le);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new u(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Dt(this.toDERHex())}toDERHex(){return Tt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dt(this.toCompactHex())}toCompactHex(){return q(this.r)+q(this.s)}}const c={isValidPrivateKey(p){try{return P(p),!0}catch{return!1}},normPrivateKeyToScalar:P,randomPrivateKey:()=>{const p=fs(e.n);return hl(e.randomBytes(p),e.n)},precompute(p=8,S=w.BASE){return S._setWindowSize(p),S.multiply(BigInt(3)),S}};function v(p,S=!0){return w.fromPrivateKey(p).toRawBytes(S)}function G(p){const S=Ot(p),C=typeof p=="string",_=(S||C)&&p.length;return S?_===i||_===s:C?_===2*i||_===2*s:p instanceof w}function $(p,S,C=!0){if(G(p))throw new Error("first arg must be private key");if(!G(S))throw new Error("second arg must be public key");return w.fromHex(S).multiply(P(p)).toRawBytes(C)}const J=e.bits2int||function(p){const S=xt(p),C=p.length*8-e.nBitLength;return C>0?S>>BigInt(C):S},X=e.bits2int_modN||function(p){return l(J(p))},a=li(e.nBitLength);function y(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(ut<=p&&p<a))throw new Error(`bigint expected < 2^${e.nBitLength}`);return kt(p,e.nByteLength)}function f(p,S,C=h){if(["recovered","canonical"].some(V=>V in C))throw new Error("sign() legacy options not supported");const{hash:_,randomBytes:B}=e;let{lowS:E,prehash:j,extraEntropy:K}=C;E==null&&(E=!0),p=Qe("msgHash",p),j&&(p=Qe("prehashed msgHash",_(p)));const W=X(p),ee=P(S),Q=[y(ee),y(W)];if(K!=null&&K!==!1){const V=K===!0?B(t.BYTES):K;Q.push(Qe("extraEntropy",V))}const le=tr(...Q),ue=W;function z(V){const oe=J(V);if(!R(oe))return;const ce=g(oe),fe=w.BASE.multiply(oe).toAffine(),L=l(fe.x);if(L===ut)return;const M=l(ce*l(ue+L*ee));if(M===ut)return;let F=(fe.x===L?0:2)|Number(fe.y&Ve),ne=M;return E&&k(M)&&(ne=I(M),F^=1),new u(L,ne,F)}return{seed:le,k2sig:z}}const h={lowS:e.lowS,prehash:!1},b={lowS:e.lowS,prehash:!1};function d(p,S,C=h){const{seed:_,k2sig:B}=f(p,S,C),E=e;return as(E.hash.outputLen,E.nByteLength,E.hmac)(_,B)}w.BASE._setWindowSize(8);function N(p,S,C,_=b){const B=p;if(S=Qe("msgHash",S),C=Qe("publicKey",C),"strict"in _)throw new Error("options.strict was renamed to lowS");const{lowS:E,prehash:j}=_;let K,W;try{if(typeof B=="string"||Ot(B))try{K=u.fromDER(B)}catch(fe){if(!(fe instanceof Tt.Err))throw fe;K=u.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:fe,s:L}=B;K=new u(fe,L)}else throw new Error("PARSE");W=w.fromHex(C)}catch(fe){if(fe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(E&&K.hasHighS())return!1;j&&(S=e.hash(S));const{r:ee,s:Q}=K,le=X(S),ue=g(Q),z=l(le*ue),V=l(ee*ue),oe=w.BASE.multiplyAndAddUnsafe(W,z,V)?.toAffine();return oe?l(oe.x)===ee:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:$,sign:d,verify:N,ProjectivePoint:w,Signature:u,utils:c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vl(r){return{hash:r,hmac:(e,...t)=>is(r,e,Ua(...t)),randomBytes:ja}}function Sl(r,e){const t=n=>El({...r,...vl(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ds=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Io=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Al=BigInt(1),Jn=BigInt(2),To=(r,e)=>(r+e/Jn)/e;function Rl(r){const e=ds,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),g=BigInt(88),w=r*r*r%e,P=w*w*r%e,O=He(P,t,e)*P%e,R=He(O,t,e)*P%e,q=He(R,Jn,e)*w%e,k=He(q,i,e)*q%e,I=He(k,s,e)*k%e,m=He(I,l,e)*I%e,u=He(m,g,e)*m%e,c=He(u,l,e)*I%e,v=He(c,t,e)*P%e,G=He(v,o,e)*k%e,$=He(G,n,e)*w%e,J=He($,Jn,e);if(!Zn.eql(Zn.sqr(J),r))throw new Error("Cannot find square root");return J}const Zn=dl(ds,void 0,void 0,{sqrt:Rl}),ui=Sl({a:BigInt(0),b:BigInt(7),Fp:Zn,n:Io,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Io,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Al*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),l=To(s*r,e),g=To(-n*r,e);let w=je(r-l*t-g*i,e),P=je(-l*n-g*s,e);const O=w>o,R=P>o;if(O&&(w=e-w),R&&(P=e-P),w>o||P>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:O,k1:w,k2neg:R,k2:P}}}},Va);BigInt(0);ui.ProjectivePoint;function Il(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const Xn={},Qn={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();Qn[n]=e,Qn[n.toUpperCase()]=e,Xn[n]=t,Xn[n.toUpperCase()]=t}function Tl(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=Xn[r[n]]+Qn[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const Wr=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return Tl(e.length%2===0?e:Il(e))},xl=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},or=r=>{const e=xl(r);return Wr(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");ui.CURVE.n;ui.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Ol="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Wr(Ol);const Nl="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Wr(Nl);const Cl="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Wr(Cl);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var xo;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(xo||(xo={}));var Oo;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(Oo||(Oo={}));var No;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(No||(No={}));var Co;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Co||(Co={}));var Nt;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(Nt||(Nt={}));or(Nt.Version);or(Nt.Balance);or(Nt.Nonce);or(Nt.CodeHash);or(Nt.CodeSize);BigInt(256)**BigInt(31);var Wn={exports:{}},Rr={},Ir={},Po;function Pl(){if(Po)return Ir;Po=1,Object.defineProperty(Ir,"__esModule",{value:!0});function r(e){var t=4,n=e.length,i=n%t;if(!i)return e;var s=n,o=t-i,l=n+o,g=Buffer.alloc(l);for(g.write(e);o--;)g.write("=",s++);return g.toString()}return Ir.default=r,Ir}var Lo;function Ll(){if(Lo)return Rr;Lo=1,Object.defineProperty(Rr,"__esModule",{value:!0});var r=Pl();function e(l,g){return g===void 0&&(g="utf8"),Buffer.isBuffer(l)?i(l.toString("base64")):i(Buffer.from(l,g).toString("base64"))}function t(l,g){return g===void 0&&(g="utf8"),Buffer.from(n(l),"base64").toString(g)}function n(l){return l=l.toString(),r.default(l).replace(/\-/g,"+").replace(/_/g,"/")}function i(l){return l.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(l){return Buffer.from(n(l),"base64")}var o=e;return o.encode=e,o.decode=t,o.toBase64=n,o.fromBase64=i,o.toBuffer=s,Rr.default=o,Rr}var Bo;function Bl(){return Bo||(Bo=1,function(r){r.exports=Ll().default,r.exports.default=r.exports}(Wn)),Wn.exports}Bl();const ve={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},bt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";ve.AQUA+"",bt.SAPPHIRE_MAINNET,ve.CELESTE+"",bt.SAPPHIRE_MAINNET,ve.CYAN+"",bt.SAPPHIRE_MAINNET,ve.MAINNET+"",bt.SAPPHIRE_MAINNET,ve.TESTNET+"",bt.SAPPHIRE_DEVNET;ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";bt.SAPPHIRE_MAINNET+"",bt.SAPPHIRE_DEVNET+"",ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";function Mo(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(i){const s=i;return s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class Ml{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class Dl{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&Mo("localStorage")?n=window.localStorage:t==="session"&&Mo("sessionStorage")?n=window.sessionStorage:n=new Ml,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ge(Dl,"instanceMap",new Map);Ke(Ke({},bt),ve);class kl extends Error{}kl.prototype.name="InvalidTokenError";const Tr={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ft={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Ul={GET_PROVIDER_STATE:"wallet_get_provider_state"},Fn={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function ql(r){return function(t,n,i){i(s=>{n.error&&Cr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(Cr.info(`RPC (${r.origin}):`,t,"->",n),s())})}}var $n={},At={},Do;function fi(){if(Do)return At;Do=1,Object.defineProperty(At,"__esModule",{value:!0}),At.EthereumProviderError=At.EthereumRpcError=void 0;const r=Zo();class e extends Error{constructor(o,l,g){if(!Number.isInteger(o))throw new Error('"code" must be an integer.');if(!l||typeof l!="string")throw new Error('"message" must be a nonempty string.');super(l),this.code=o,g!==void 0&&(this.data=g)}serialize(){const o={code:this.code,message:this.message};return this.data!==void 0&&(o.data=this.data),this.stack&&(o.stack=this.stack),o}toString(){return r.default(this.serialize(),i,2)}}At.EthereumRpcError=e;class t extends e{constructor(o,l,g){if(!n(o))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(o,l,g)}}At.EthereumProviderError=t;function n(s){return Number.isInteger(s)&&s>=1e3&&s<=4999}function i(s,o){if(o!=="[Circular]")return o}return At}var Hn={},Rt={},ko;function ci(){return ko||(ko=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.errorValues=Rt.errorCodes=void 0,Rt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Rt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),Rt}var Uo;function hs(){return Uo||(Uo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=ci(),t=fi(),n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(R,q=i){if(Number.isInteger(R)){const k=R.toString();if(O(e.errorValues,k))return e.errorValues[k].message;if(w(R))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return q}r.getMessageFromCode=o;function l(R){if(!Number.isInteger(R))return!1;const q=R.toString();return!!(e.errorValues[q]||w(R))}r.isValidCode=l;function g(R,{fallbackError:q=s,shouldIncludeStack:k=!1}={}){var I,m;if(!q||!Number.isInteger(q.code)||typeof q.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(R instanceof t.EthereumRpcError)return R.serialize();const u={};if(R&&typeof R=="object"&&!Array.isArray(R)&&O(R,"code")&&l(R.code)){const v=R;u.code=v.code,v.message&&typeof v.message=="string"?(u.message=v.message,O(v,"data")&&(u.data=v.data)):(u.message=o(u.code),u.data={originalError:P(R)})}else{u.code=q.code;const v=(I=R)===null||I===void 0?void 0:I.message;u.message=v&&typeof v=="string"?v:q.message,u.data={originalError:P(R)}}const c=(m=R)===null||m===void 0?void 0:m.stack;return k&&R&&c&&typeof c=="string"&&(u.stack=c),u}r.serializeError=g;function w(R){return R>=-32099&&R<=-32e3}function P(R){return R&&typeof R=="object"&&!Array.isArray(R)?Object.assign({},R):R}function O(R,q){return Object.prototype.hasOwnProperty.call(R,q)}}(Hn)),Hn}var Yt={},qo;function jl(){if(qo)return Yt;qo=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ethErrors=void 0;const r=fi(),e=hs(),t=ci();Yt.ethErrors={rpc:{parse:o=>n(t.errorCodes.rpc.parse,o),invalidRequest:o=>n(t.errorCodes.rpc.invalidRequest,o),invalidParams:o=>n(t.errorCodes.rpc.invalidParams,o),methodNotFound:o=>n(t.errorCodes.rpc.methodNotFound,o),internal:o=>n(t.errorCodes.rpc.internal,o),server:o=>{if(!o||typeof o!="object"||Array.isArray(o))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:l}=o;if(!Number.isInteger(l)||l>-32005||l<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(l,o)},invalidInput:o=>n(t.errorCodes.rpc.invalidInput,o),resourceNotFound:o=>n(t.errorCodes.rpc.resourceNotFound,o),resourceUnavailable:o=>n(t.errorCodes.rpc.resourceUnavailable,o),transactionRejected:o=>n(t.errorCodes.rpc.transactionRejected,o),methodNotSupported:o=>n(t.errorCodes.rpc.methodNotSupported,o),limitExceeded:o=>n(t.errorCodes.rpc.limitExceeded,o)},provider:{userRejectedRequest:o=>i(t.errorCodes.provider.userRejectedRequest,o),unauthorized:o=>i(t.errorCodes.provider.unauthorized,o),unsupportedMethod:o=>i(t.errorCodes.provider.unsupportedMethod,o),disconnected:o=>i(t.errorCodes.provider.disconnected,o),chainDisconnected:o=>i(t.errorCodes.provider.chainDisconnected,o),custom:o=>{if(!o||typeof o!="object"||Array.isArray(o))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:l,message:g,data:w}=o;if(!g||typeof g!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(l,g,w)}}};function n(o,l){const[g,w]=s(l);return new r.EthereumRpcError(o,g||e.getMessageFromCode(o),w)}function i(o,l){const[g,w]=s(l);return new r.EthereumProviderError(o,g||e.getMessageFromCode(o),w)}function s(o){if(o){if(typeof o=="string")return[o];if(typeof o=="object"&&!Array.isArray(o)){const{message:l,data:g}=o;if(l&&typeof l!="string")throw new Error("Must specify string message.");return[l||void 0,g]}}return[]}return Yt}var jo;function Wl(){return jo||(jo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=fi();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=hs();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=jl();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=ci();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}($n)),$n}var yt=Wl(),zn,Wo;function Fl(){return Wo||(Wo=1,zn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),zn}var $l=Fl();const Hl=Ut($l);var zl="2.1.0";function gs(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function Gl(r){return gs(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function Vl(r){return gs(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function Kl(r){return Gl(r)&&Vl(r)}var rt={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const Yl={PRODUCTION:"production"},Zt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Jl={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var di={translations:Jl,localStorageKeyPrefix:"torus-"},Ee=Cr.getLogger("solana-embed");function Zl(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=yt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:i}=e;return i&&Ee.error(`Torus - RPC Error: ${i.message}`,i),n()})}}function Xl(r,e,t){let n=`Torus: Lost connection to "${r}".`;e?.stack&&(n+=`
${e.stack}`),Ee.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const xr=()=>Math.random().toString(36).slice(2),ps=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},Ql=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(di.translations,e[0])?e[0]:"en",r},eu={height:660,width:375},tu={height:740,width:1315},ru={height:700,width:1200},ws={height:600,width:400};function nu(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function Xt(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=1,g=Math.abs((s-e)/2/l+n),w=Math.abs((o-t)/2/l+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/l},width=${e/l},top=${w},left=${g}`}class bs extends Ur{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!Kl(e))throw new Error(rt.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const s=new xa;oo(e,s,e,this._handleStreamDisconnect.bind(this,"Torus")),s.ignoreStream("phishing");const o=Ra();oo(o.stream,s.createStream(i),o.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const l=new lt;l.push(Ia()),l.push(Zl()),l.push(ql({origin:location.origin})),l.push(o.middleware),this._rpcEngine=l,this.jsonRpcConnectionEvents=o.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw yt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw yt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw yt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestParams(),data:e});return new Promise((i,s)=>{this._rpcRequest({method:t,params:n},Vn(i,s))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,Vn(t,n))})}_handleStreamDisconnect(e,t){Xl(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Bt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function Or(r){return r.version===void 0}class ys extends Ur{constructor(e){let{url:t,target:n,features:i,timeout:s=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=i||Xt(ru),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=s,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){return this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class Fr extends bs{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:i}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=Ke({},Fr._defaultState),this.torusUrl="",this.dappStorageKey="";const s=di.translations[Ql()];this.embedTranslations=s.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const o=l=>{const{method:g,params:w}=l;if(g===Tr.IFRAME_STATUS){const{isFullScreen:P,rid:O}=w;this._displayIframe({isFull:P,rid:O})}else if(g==="create_window"){const{windowId:P,url:O}=w;this._createPopupBlockAlert(P,O)}else if(g===Tr.CLOSE_WINDOW)this._handleCloseWindow(w);else if(g===Tr.USER_LOGGED_IN){const{currentLoginProvider:P}=w;this._state.isLoggedIn=!0,this._state.currentLoginProvider=P}else g===Tr.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",o)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:i,torusIframe:s}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=s,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:o,isLoggedIn:l}=await this.request({method:ft.GET_PROVIDER_STATE,params:[]});this._handleConnect(o,l)}catch(t){Ee.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{Ee.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(s.hash?s.hash+=`&dappStorageKey=${this.dappStorageKey}`:s.hash=`#dappStorageKey=${this.dappStorageKey}`);const o=new ys({url:s,target:n,features:i});if(o.open(),!o.window){this._createPopupBlockAlert(e,s.href);return}this.windowRefs[e]=o,this.request({method:"opened_window",params:{windowId:e}}),o.once("close",()=>{delete this.windowRefs[e],this.request({method:ft.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Zt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Zt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Zt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Zt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:ft.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,i=e;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),Ee.debug(rt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new yt.EthereumRpcError(1013,t||rt.errors.disconnected()),Ee.debug(n)):(n=new yt.EthereumRpcError(1011,t||rt.errors.permanentlyDisconnected()),Ee.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),i=Bt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),s=Bt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),o=Bt('<div id="torusAlert__btn-container"></div>');o.appendChild(s),i.appendChild(o);const l=()=>{s.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:Xt(ws)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),l(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(Fr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class $r extends bs{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:i}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=Ke({},$r._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const s=o=>{const{method:l,params:g}=o;l===Fn.ACCOUNTS_CHANGED?this._handleAccountsChanged(g):l===Fn.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(g):l===Fn.CHAIN_CHANGED&&this._handleChainChanged(g)};this.jsonRpcConnectionEvents.on("notification",s)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Ul.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){Ee.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{Ee.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;const s=e;if(!Array.isArray(s)){if(s.jsonrpc||(s.jsonrpc="2.0"),s.method==="solana_accounts"||s.method==="solana_requestAccounts")i=(o,l)=>{this._handleAccountsChanged(l.result||[],s.method==="solana_accounts",n),t(o,l)};else if(s.method==="wallet_getProviderState"){this._rpcEngine.handle(e,i);return}}this.tryWindowHandle(s,i)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),Ee.debug(rt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new yt.EthereumRpcError(1013,t||rt.errors.disconnected()),Ee.debug(n)):(n=new yt.EthereumRpcError(1011,t||rt.errors.permanentlyDisconnected()),Ee.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=e;Array.isArray(i)||(Ee.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const s of e)if(typeof s!="string"){Ee.error("Torus: Received non-string account. Please report this bug.",e),i=[];break}Hl(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&Ee.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){Ee.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){Ee.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge($r,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Fo(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const iu=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function ou(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Fo(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Fo(t.href))?t.href:""}catch{return""}}const su=async()=>({name:iu(window),icon:await ou(window)}),au=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],lu=[ft.SET_PROVIDER],uu=nu("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await ps("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){Ee.warn(e)}})();class bu{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=Yl.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:i=!1,useLocalStorage:s=!1,buttonPosition:o=Zt.BOTTOM_LEFT,apiKey:l="torus-default",extraParams:g={},whiteLabel:w}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:P,logLevel:O}=await ps(e);Ee.enableAll(),Ee.info(P,"url loaded"),Ee.info(`Solana Embed Version :${zl}`),this.torusUrl=P,Ee.setDefaultLevel(O),t?Ee.enableAll():Ee.disableAll();const R=this.handleDappStorageKey(s),q=new URL(P);q.pathname.endsWith("/")?q.pathname+="frame":q.pathname+="/frame";const k=new URLSearchParams;return R&&k.append("dappStorageKey",R),k.append("origin",window.location.origin),q.hash=k.toString(),this.torusIframe=Bt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${q.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Bt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Bt(`<link href="${P}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((I,m)=>{try{this.torusIframe.addEventListener("load",async()=>{const u=await su();this.torusIframe.contentWindow.postMessage({buttonPosition:o,apiKey:l,network:n,dappMetadata:u,extraParams:g,whiteLabel:w},q.origin),await this._setupWeb3({torusUrl:P}),i&&this.showTorusButton(),w?.topupHide?this.isTopupHidden=w.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,I()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(u){m(u)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Vn(n,i))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw Ee.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ft.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:ft.SET_PROVIDER,params:Ke({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:ft.WALLET_INSTANCE_ID,params:[]}),i=e?`/${e}`:"",s=new URL(`${this.torusUrl}/wallet${i}`);s.searchParams.append("instanceId",n),Object.keys(t).forEach(l=>{s.searchParams.append(l,t[l])}),this.dappStorageKey&&(s.hash=`#dappStorageKey=${this.dappStorageKey}`),new ys({url:s,features:Xt(tu)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ft.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=xr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:ft.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=Or(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=Or(e),i=n?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=Or(e),n=t?e.serializeMessage().toString("hex"):Buffer.from(e.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),s=JSON.parse(i),o={publicKey:new Si(s.publicKey),signature:Buffer.from(s.signature,"hex")};return e.addSignature(o.publicKey,o.signature),e}async signAllTransactions(e){let t;const n=e.map(o=>(t=Or(o),t?o.serializeMessage().toString("hex"):Buffer.from(o.message.serialize()).toString("hex"))),s=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(o=>{const l=JSON.parse(o);return{publicKey:new Si(l.publicKey),signature:Buffer.from(l.signature,"hex")}});return e.forEach((o,l)=>(o.addSignature(s[l].publicKey,s[l].signature),o)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${di.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(uu&&e){const i=window.localStorage.getItem(t);if(i)n=i;else{const s=`torus-app-${xr()}`;window.localStorage.setItem(t,s),n=s}}return this.dappStorageKey=n,n}async _setupWeb3(e){Ee.info("setupWeb3 running");const t=new lo({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new lo({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new $r(t,{}),s=new Fr(n,{});i.tryWindowHandle=(w,P)=>{const O=w;if(!Array.isArray(O)&&au.includes(O.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const R=xr();s._handleWindow(R,{target:"_blank",features:Xt(ws)}),O.windowId=R}i._rpcEngine.handle(O,P)},s.tryWindowHandle=(w,P)=>{const O=w;if(!Array.isArray(O)&&lu.includes(O.method)){const R=xr();s._handleWindow(R,{target:"_blank",features:Xt(eu)}),O.params.windowId=R}s._rpcEngine.handle(O,P)};const o=w=>{const P=i[w],O=this;i[w]=function(q,k){const{method:I,params:m=[]}=q;if(I==="solana_requestAccounts"){if(!k)return O.login({loginProvider:m[0]});O.login({loginProvider:m[0]}).then(u=>k(null,u)).catch(u=>k(u))}return P.apply(this,[q,k])}};o("request"),o("sendAsync"),o("send");const l=new Proxy(i,{deleteProperty:()=>!0}),g=new Proxy(s,{deleteProperty:()=>!0});this.provider=l,this.communicationProvider=g,await Promise.all([i._initializeState(),s._initializeState(Ke(Ke({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),Ee.debug("Torus - injected provider")}}export{Zt as BUTTON_POSITION,Yl as TORUS_BUILD_ENV,$r as TorusInPageProvider,bu as default};
